var Nr=Object.defineProperty;var Sr=(t,e,n)=>e in t?Nr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _=(t,e,n)=>(Sr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Tn(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}var br={value:()=>{}};function Gt(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(t){this._=t}function kr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=Gt.prototype={constructor:Ut,on:function(t,e){var n=this._,r=kr(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Lr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=We(n[i],t.name,e);else if(e==null)for(i in n)n[i]=We(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ut(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Lr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function We(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=br,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var we="http://www.w3.org/1999/xhtml";const je={svg:"http://www.w3.org/2000/svg",xhtml:we,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function le(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),je.hasOwnProperty(e)?{space:je[e],local:t}:t}function Mr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===we&&e.documentElement.namespaceURI===we?e.createElement(t):e.createElementNS(n,t)}}function zr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cn(t){var e=le(t);return(e.local?zr:Mr)(e)}function Tr(){}function De(t){return t==null?Tr:function(){return this.querySelector(t)}}function Cr(t){typeof t!="function"&&(t=De(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new Z(r,this._parents)}function Ar(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Er(){return[]}function An(t){return t==null?Er:function(){return this.querySelectorAll(t)}}function Dr(t){return function(){return Ar(t.apply(this,arguments))}}function Pr(t){typeof t=="function"?t=Dr(t):t=An(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new Z(r,i)}function En(t){return function(){return this.matches(t)}}function Dn(t){return function(e){return e.matches(t)}}var Ir=Array.prototype.find;function Fr(t){return function(){return Ir.call(this.children,t)}}function Rr(){return this.firstElementChild}function $r(t){return this.select(t==null?Rr:Fr(typeof t=="function"?t:Dn(t)))}var Gr=Array.prototype.filter;function Hr(){return Array.from(this.children)}function Or(t){return function(){return Gr.call(this.children,t)}}function Br(t){return this.selectAll(t==null?Hr:Or(typeof t=="function"?t:Dn(t)))}function Xr(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new Z(r,this._parents)}function Pn(t){return new Array(t.length)}function qr(){return new Z(this._enter||this._groups.map(Pn),this._parents)}function Zt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zt.prototype={constructor:Zt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Vr(t){return function(){return t}}function Yr(t,e,n,r,i,o){for(var a=0,s,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Zt(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function Ur(t,e,n,r,i,o,a){var s,l,c=new Map,u=e.length,g=o.length,h=new Array(u),f;for(s=0;s<u;++s)(l=e[s])&&(h[s]=f=a.call(l,l.__data__,s,e)+"",c.has(f)?i[s]=l:c.set(f,l));for(s=0;s<g;++s)f=a.call(t,o[s],s,o)+"",(l=c.get(f))?(r[s]=l,l.__data__=o[s],c.delete(f)):n[s]=new Zt(t,o[s]);for(s=0;s<u;++s)(l=e[s])&&c.get(h[s])===l&&(i[s]=l)}function Wr(t){return t.__data__}function jr(t,e){if(!arguments.length)return Array.from(this,Wr);var n=e?Ur:Yr,r=this._parents,i=this._groups;typeof t!="function"&&(t=Vr(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],g=i[c],h=g.length,f=Kr(t.call(u,u&&u.__data__,c,r)),x=f.length,v=s[c]=new Array(x),d=a[c]=new Array(x),p=l[c]=new Array(h);n(u,g,v,d,p,f,e);for(var w=0,k=0,m,S;w<x;++w)if(m=v[w]){for(w>=k&&(k=w+1);!(S=d[k])&&++k<x;);m._next=S||null}}return a=new Z(a,r),a._enter=s,a._exit=l,a}function Kr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zr(){return new Z(this._exit||this._groups.map(Pn),this._parents)}function Qr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Jr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],g=c.length,h=s[l]=new Array(g),f,x=0;x<g;++x)(f=c[x]||u[x])&&(h[x]=f);for(;l<i;++l)s[l]=n[l];return new Z(s,this._parents)}function ti(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ei(t){t||(t=ni);function e(g,h){return g&&h?t(g.__data__,h.__data__):!g-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new Z(i,this._parents).order()}function ni(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ri(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ii(){return Array.from(this)}function oi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function ai(){let t=0;for(const e of this)++t;return t}function si(){return!this.node()}function li(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function ci(t){return function(){this.removeAttribute(t)}}function ui(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hi(t,e){return function(){this.setAttribute(t,e)}}function fi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function di(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function pi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gi(t,e){var n=le(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ui:ci:typeof e=="function"?n.local?pi:di:n.local?fi:hi)(n,e))}function In(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mi(t){return function(){this.style.removeProperty(t)}}function yi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vi(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wi(t,e,n){return arguments.length>1?this.each((e==null?mi:typeof e=="function"?vi:yi)(t,e,n??"")):St(this.node(),t)}function St(t,e){return t.style.getPropertyValue(e)||In(t).getComputedStyle(t,null).getPropertyValue(e)}function xi(t){return function(){delete this[t]}}function _i(t,e){return function(){this[t]=e}}function Ni(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Si(t,e){return arguments.length>1?this.each((e==null?xi:typeof e=="function"?Ni:_i)(t,e)):this.node()[t]}function Fn(t){return t.trim().split(/^|\s+/)}function Pe(t){return t.classList||new Rn(t)}function Rn(t){this._node=t,this._names=Fn(t.getAttribute("class")||"")}Rn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function $n(t,e){for(var n=Pe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gn(t,e){for(var n=Pe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function bi(t){return function(){$n(this,t)}}function ki(t){return function(){Gn(this,t)}}function Li(t,e){return function(){(e.apply(this,arguments)?$n:Gn)(this,t)}}function Mi(t,e){var n=Fn(t+"");if(arguments.length<2){for(var r=Pe(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Li:e?bi:ki)(n,e))}function zi(){this.textContent=""}function Ti(t){return function(){this.textContent=t}}function Ci(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ai(t){return arguments.length?this.each(t==null?zi:(typeof t=="function"?Ci:Ti)(t)):this.node().textContent}function Ei(){this.innerHTML=""}function Di(t){return function(){this.innerHTML=t}}function Pi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ii(t){return arguments.length?this.each(t==null?Ei:(typeof t=="function"?Pi:Di)(t)):this.node().innerHTML}function Fi(){this.nextSibling&&this.parentNode.appendChild(this)}function Ri(){return this.each(Fi)}function $i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gi(){return this.each($i)}function Hi(t){var e=typeof t=="function"?t:Cn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Oi(){return null}function Bi(t,e){var n=typeof t=="function"?t:Cn(t),r=e==null?Oi:typeof e=="function"?e:De(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xi(){var t=this.parentNode;t&&t.removeChild(this)}function qi(){return this.each(Xi)}function Vi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ui(t){return this.select(t?Yi:Vi)}function Wi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ji(t){return function(e){t.call(this,e,this.__data__)}}function Ki(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Zi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Qi(t,e,n){return function(){var r=this.__on,i,o=ji(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ji(t,e,n){var r=Ki(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?Qi:Zi,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Hn(t,e,n){var r=In(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function to(t,e){return function(){return Hn(this,t,e)}}function eo(t,e){return function(){return Hn(this,t,e.apply(this,arguments))}}function no(t,e){return this.each((typeof e=="function"?eo:to)(t,e))}function*ro(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var On=[null];function Z(t,e){this._groups=t,this._parents=e}function Ht(){return new Z([[document.documentElement]],On)}function io(){return this}Z.prototype=Ht.prototype={constructor:Z,select:Cr,selectAll:Pr,selectChild:$r,selectChildren:Br,filter:Xr,data:jr,enter:qr,exit:Zr,join:Qr,merge:Jr,selection:io,order:ti,sort:ei,call:ri,nodes:ii,node:oi,size:ai,empty:si,each:li,attr:gi,style:wi,property:Si,classed:Mi,text:Ai,html:Ii,raise:Ri,lower:Gi,append:Hi,insert:Bi,remove:qi,clone:Ui,datum:Wi,on:Ji,dispatch:no,[Symbol.iterator]:ro};function et(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],On)}function oo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function lt(t,e){if(t=oo(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ao={passive:!1},Et={capture:!0,passive:!1};function fe(t){t.stopImmediatePropagation()}function wt(t){t.preventDefault(),t.stopImmediatePropagation()}function Bn(t){var e=t.document.documentElement,n=et(t).on("dragstart.drag",wt,Et);"onselectstart"in e?n.on("selectstart.drag",wt,Et):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xn(t,e){var n=t.document.documentElement,r=et(t).on("dragstart.drag",null);e&&(r.on("click.drag",wt,Et),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Bt=t=>()=>t;function xe(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}xe.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function so(t){return!t.ctrlKey&&!t.button}function lo(){return this.parentNode}function co(t,e){return e??{x:t.x,y:t.y}}function uo(){return navigator.maxTouchPoints||"ontouchstart"in this}function ho(){var t=so,e=lo,n=co,r=uo,i={},o=Gt("start","drag","end"),a=0,s,l,c,u,g=0;function h(m){m.on("mousedown.drag",f).filter(r).on("touchstart.drag",d).on("touchmove.drag",p,ao).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(m,S){if(!(u||!t.call(this,m,S))){var M=k(this,e.call(this,m,S),m,S,"mouse");M&&(et(m.view).on("mousemove.drag",x,Et).on("mouseup.drag",v,Et),Bn(m.view),fe(m),c=!1,s=m.clientX,l=m.clientY,M("start",m))}}function x(m){if(wt(m),!c){var S=m.clientX-s,M=m.clientY-l;c=S*S+M*M>g}i.mouse("drag",m)}function v(m){et(m.view).on("mousemove.drag mouseup.drag",null),Xn(m.view,c),wt(m),i.mouse("end",m)}function d(m,S){if(t.call(this,m,S)){var M=m.changedTouches,C=e.call(this,m,S),D=M.length,F,P;for(F=0;F<D;++F)(P=k(this,C,m,S,M[F].identifier,M[F]))&&(fe(m),P("start",m,M[F]))}}function p(m){var S=m.changedTouches,M=S.length,C,D;for(C=0;C<M;++C)(D=i[S[C].identifier])&&(wt(m),D("drag",m,S[C]))}function w(m){var S=m.changedTouches,M=S.length,C,D;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<M;++C)(D=i[S[C].identifier])&&(fe(m),D("end",m,S[C]))}function k(m,S,M,C,D,F){var P=o.copy(),R=lt(F||M,S),B,O,y;if((y=n.call(m,new xe("beforestart",{sourceEvent:M,target:h,identifier:D,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:P}),C))!=null)return B=y.x-R[0]||0,O=y.y-R[1]||0,function b(N,L,z){var A=R,E;switch(N){case"start":i[D]=b,E=a++;break;case"end":delete i[D],--a;case"drag":R=lt(z||L,S),E=a;break}P.call(N,m,new xe(N,{sourceEvent:L,subject:y,target:h,identifier:D,active:E,x:R[0]+B,y:R[1]+O,dx:R[0]-A[0],dy:R[1]-A[1],dispatch:P}),C)}}return h.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Bt(!!m),h):t},h.container=function(m){return arguments.length?(e=typeof m=="function"?m:Bt(m),h):e},h.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Bt(m),h):n},h.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Bt(!!m),h):r},h.on=function(){var m=o.on.apply(o,arguments);return m===o?h:m},h.clickDistance=function(m){return arguments.length?(g=(m=+m)*m,h):Math.sqrt(g)},h}function Ie(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ot(){}var Dt=.7,Qt=1/Dt,xt="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fo=/^#([0-9a-f]{3,8})$/,po=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),go=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),mo=new RegExp(`^rgba\\(${xt},${xt},${xt},${Pt}\\)$`),yo=new RegExp(`^rgba\\(${ot},${ot},${ot},${Pt}\\)$`),vo=new RegExp(`^hsl\\(${Pt},${ot},${ot}\\)$`),wo=new RegExp(`^hsla\\(${Pt},${ot},${ot},${Pt}\\)$`),Ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ie(Ot,It,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ze,formatHex:Ze,formatHex8:xo,formatHsl:_o,formatRgb:Qe,toString:Qe});function Ze(){return this.rgb().formatHex()}function xo(){return this.rgb().formatHex8()}function _o(){return Vn(this).formatHsl()}function Qe(){return this.rgb().formatRgb()}function It(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=fo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Je(e):n===3?new j(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=po.exec(t))?new j(e[1],e[2],e[3],1):(e=go.exec(t))?new j(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mo.exec(t))?Xt(e[1],e[2],e[3],e[4]):(e=yo.exec(t))?Xt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vo.exec(t))?nn(e[1],e[2]/100,e[3]/100,1):(e=wo.exec(t))?nn(e[1],e[2]/100,e[3]/100,e[4]):Ke.hasOwnProperty(t)?Je(Ke[t]):t==="transparent"?new j(NaN,NaN,NaN,0):null}function Je(t){return new j(t>>16&255,t>>8&255,t&255,1)}function Xt(t,e,n,r){return r<=0&&(t=e=n=NaN),new j(t,e,n,r)}function No(t){return t instanceof Ot||(t=It(t)),t?(t=t.rgb(),new j(t.r,t.g,t.b,t.opacity)):new j}function _e(t,e,n,r){return arguments.length===1?No(t):new j(t,e,n,r??1)}function j(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ie(j,_e,qn(Ot,{brighter(t){return t=t==null?Qt:Math.pow(Qt,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dt:Math.pow(Dt,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new j(gt(this.r),gt(this.g),gt(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tn,formatHex:tn,formatHex8:So,formatRgb:en,toString:en}));function tn(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function So(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function en(){const t=Jt(this.opacity);return`${t===1?"rgb(":"rgba("}${gt(this.r)}, ${gt(this.g)}, ${gt(this.b)}${t===1?")":`, ${t})`}`}function Jt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pt(t){return t=gt(t),(t<16?"0":"")+t.toString(16)}function nn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nt(t,e,n,r)}function Vn(t){if(t instanceof nt)return new nt(t.h,t.s,t.l,t.opacity);if(t instanceof Ot||(t=It(t)),!t)return new nt;if(t instanceof nt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new nt(a,s,l,t.opacity)}function bo(t,e,n,r){return arguments.length===1?Vn(t):new nt(t,e,n,r??1)}function nt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ie(nt,bo,qn(Ot,{brighter(t){return t=t==null?Qt:Math.pow(Qt,t),new nt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dt:Math.pow(Dt,t),new nt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new j(de(t>=240?t-240:t+120,i,r),de(t,i,r),de(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new nt(rn(this.h),qt(this.s),qt(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jt(this.opacity);return`${t===1?"hsl(":"hsla("}${rn(this.h)}, ${qt(this.s)*100}%, ${qt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rn(t){return t=(t||0)%360,t<0?t+360:t}function qt(t){return Math.max(0,Math.min(1,t||0))}function de(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Yn=t=>()=>t;function ko(t,e){return function(n){return t+n*e}}function Lo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mo(t){return(t=+t)==1?Un:function(e,n){return n-e?Lo(e,n,t):Yn(isNaN(e)?n:e)}}function Un(t,e){var n=e-t;return n?ko(t,n):Yn(isNaN(t)?e:t)}const on=function t(e){var n=Mo(e);function r(i,o){var a=n((i=_e(i)).r,(o=_e(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=Un(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(Ne.source,"g");function zo(t){return function(){return t}}function To(t){return function(e){return t(e)+""}}function Co(t,e){var n=Ne.lastIndex=pe.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Ne.exec(t))&&(i=pe.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ht(r,i)})),n=pe.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?To(l[0].x):zo(e):(e=l.length,function(c){for(var u=0,g;u<e;++u)s[(g=l[u]).i]=g.x(c);return s.join("")})}var an=180/Math.PI,Se={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wn(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*an,skewX:Math.atan(l)*an,scaleX:a,scaleY:s}}var Vt;function Ao(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Se:Wn(e.a,e.b,e.c,e.d,e.e,e.f)}function Eo(t){return t==null||(Vt||(Vt=document.createElementNS("http://www.w3.org/2000/svg","g")),Vt.setAttribute("transform",t),!(t=Vt.transform.baseVal.consolidate()))?Se:(t=t.matrix,Wn(t.a,t.b,t.c,t.d,t.e,t.f))}function jn(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,g,h,f,x){if(c!==g||u!==h){var v=f.push("translate(",null,e,null,n);x.push({i:v-4,x:ht(c,g)},{i:v-2,x:ht(u,h)})}else(g||h)&&f.push("translate("+g+e+h+n)}function a(c,u,g,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:g.push(i(g)+"rotate(",null,r)-2,x:ht(c,u)})):u&&g.push(i(g)+"rotate("+u+r)}function s(c,u,g,h){c!==u?h.push({i:g.push(i(g)+"skewX(",null,r)-2,x:ht(c,u)}):u&&g.push(i(g)+"skewX("+u+r)}function l(c,u,g,h,f,x){if(c!==g||u!==h){var v=f.push(i(f)+"scale(",null,",",null,")");x.push({i:v-4,x:ht(c,g)},{i:v-2,x:ht(u,h)})}else(g!==1||h!==1)&&f.push(i(f)+"scale("+g+","+h+")")}return function(c,u){var g=[],h=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,g,h),a(c.rotate,u.rotate,g,h),s(c.skewX,u.skewX,g,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,g,h),c=u=null,function(f){for(var x=-1,v=h.length,d;++x<v;)g[(d=h[x]).i]=d.x(f);return g.join("")}}}var Do=jn(Ao,"px, ","px)","deg)"),Po=jn(Eo,", ",")",")"),Io=1e-12;function sn(t){return((t=Math.exp(t))+1/t)/2}function Fo(t){return((t=Math.exp(t))-1/t)/2}function Ro(t){return((t=Math.exp(2*t))-1)/(t+1)}const $o=function t(e,n,r){function i(o,a){var s=o[0],l=o[1],c=o[2],u=a[0],g=a[1],h=a[2],f=u-s,x=g-l,v=f*f+x*x,d,p;if(v<Io)p=Math.log(h/c)/e,d=function(C){return[s+C*f,l+C*x,c*Math.exp(e*C*p)]};else{var w=Math.sqrt(v),k=(h*h-c*c+r*v)/(2*c*n*w),m=(h*h-c*c-r*v)/(2*h*n*w),S=Math.log(Math.sqrt(k*k+1)-k),M=Math.log(Math.sqrt(m*m+1)-m);p=(M-S)/e,d=function(C){var D=C*p,F=sn(S),P=c/(n*w)*(F*Ro(e*D+S)-Fo(S));return[s+P*f,l+P*x,c*F/sn(e*D+S)]}}return d.duration=p*1e3*e/Math.SQRT2,d}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return t(a,s,l)},i}(Math.SQRT2,2,4);var bt=0,zt=0,Lt=0,Kn=1e3,te,Tt,ee=0,yt=0,ce=0,Ft=typeof performance=="object"&&performance.now?performance:Date,Zn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fe(){return yt||(Zn(Go),yt=Ft.now()+ce)}function Go(){yt=0}function ne(){this._call=this._time=this._next=null}ne.prototype=Re.prototype={constructor:ne,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Fe():+n)+(e==null?0:+e),!this._next&&Tt!==this&&(Tt?Tt._next=this:te=this,Tt=this),this._call=t,this._time=n,be()},stop:function(){this._call&&(this._call=null,this._time=1/0,be())}};function Re(t,e,n){var r=new ne;return r.restart(t,e,n),r}function Ho(){Fe(),++bt;for(var t=te,e;t;)(e=yt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--bt}function ln(){yt=(ee=Ft.now())+ce,bt=zt=0;try{Ho()}finally{bt=0,Bo(),yt=0}}function Oo(){var t=Ft.now(),e=t-ee;e>Kn&&(ce-=e,ee=t)}function Bo(){for(var t,e=te,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:te=n);Tt=t,be(r)}function be(t){if(!bt){zt&&(zt=clearTimeout(zt));var e=t-yt;e>24?(t<1/0&&(zt=setTimeout(ln,t-Ft.now()-ce)),Lt&&(Lt=clearInterval(Lt))):(Lt||(ee=Ft.now(),Lt=setInterval(Oo,Kn)),bt=1,Zn(ln))}}function cn(t,e,n){var r=new ne;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Xo=Gt("start","end","cancel","interrupt"),qo=[],Qn=0,un=1,ke=2,Wt=3,hn=4,Le=5,jt=6;function ue(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Vo(t,n,{name:e,index:r,group:i,on:Xo,tween:qo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Qn})}function $e(t,e){var n=rt(t,e);if(n.state>Qn)throw new Error("too late; already scheduled");return n}function at(t,e){var n=rt(t,e);if(n.state>Wt)throw new Error("too late; already running");return n}function rt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Vo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Re(o,0,n.time);function o(c){n.state=un,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,g,h,f;if(n.state!==un)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Wt)return cn(a);f.state===hn?(f.state=jt,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=jt,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(cn(function(){n.state===Wt&&(n.state=hn,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=ke,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ke){for(n.state=Wt,i=new Array(h=n.tween.length),u=0,g=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++g]=f);i.length=g+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Le,1),g=-1,h=i.length;++g<h;)i[g].call(t,u);n.state===Le&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=jt,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Kt(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>ke&&r.state<Le,r.state=jt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Yo(t){return this.each(function(){Kt(this,t)})}function Uo(t,e){var n,r;return function(){var i=at(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Wo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=at(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function jo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=rt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Uo:Wo)(n,t,e))}function Ge(t,e,n){var r=t._id;return t.each(function(){var i=at(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return rt(i,r).value[e]}}function Jn(t,e){var n;return(typeof e=="number"?ht:e instanceof It?on:(n=It(e))?(e=n,on):Co)(t,e)}function Ko(t){return function(){this.removeAttribute(t)}}function Zo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Jo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function ta(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function ea(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function na(t,e){var n=le(t),r=n==="transform"?Po:Jn;return this.attrTween(t,typeof e=="function"?(n.local?ea:ta)(n,r,Ge(this,"attr."+t,e)):e==null?(n.local?Zo:Ko)(n):(n.local?Jo:Qo)(n,r,e))}function ra(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ia(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function oa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ia(t,o)),n}return i._value=e,i}function aa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ra(t,o)),n}return i._value=e,i}function sa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=le(t);return this.tween(n,(r.local?oa:aa)(r,e))}function la(t,e){return function(){$e(this,t).delay=+e.apply(this,arguments)}}function ca(t,e){return e=+e,function(){$e(this,t).delay=e}}function ua(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?la:ca)(e,t)):rt(this.node(),e).delay}function ha(t,e){return function(){at(this,t).duration=+e.apply(this,arguments)}}function fa(t,e){return e=+e,function(){at(this,t).duration=e}}function da(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ha:fa)(e,t)):rt(this.node(),e).duration}function pa(t,e){if(typeof e!="function")throw new Error;return function(){at(this,t).ease=e}}function ga(t){var e=this._id;return arguments.length?this.each(pa(e,t)):rt(this.node(),e).ease}function ma(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,t).ease=n}}function ya(t){if(typeof t!="function")throw new Error;return this.each(ma(this._id,t))}function va(t){typeof t!="function"&&(t=En(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new ut(r,this._parents,this._name,this._id)}function wa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=e[s],c=n[s],u=l.length,g=a[s]=new Array(u),h,f=0;f<u;++f)(h=l[f]||c[f])&&(g[f]=h);for(;s<r;++s)a[s]=e[s];return new ut(a,this._parents,this._name,this._id)}function xa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _a(t,e,n){var r,i,o=xa(e)?$e:at;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function Na(t,e){var n=this._id;return arguments.length<2?rt(this.node(),n).on.on(t):this.each(_a(n,t,e))}function Sa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ba(){return this.on("end.remove",Sa(this._id))}function ka(t){var e=this._name,n=this._id;typeof t!="function"&&(t=De(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,c=o[a]=new Array(l),u,g,h=0;h<l;++h)(u=s[h])&&(g=t.call(u,u.__data__,h,s))&&("__data__"in u&&(g.__data__=u.__data__),c[h]=g,ue(c[h],e,n,h,c,rt(u,n)));return new ut(o,this._parents,e,n)}function La(t){var e=this._name,n=this._id;typeof t!="function"&&(t=An(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,g=0;g<c;++g)if(u=l[g]){for(var h=t.call(u,u.__data__,g,l),f,x=rt(u,n),v=0,d=h.length;v<d;++v)(f=h[v])&&ue(f,e,n,v,h,x);o.push(h),a.push(u)}return new ut(o,a,e,n)}var Ma=Ht.prototype.constructor;function za(){return new Ma(this._groups,this._parents)}function Ta(t,e){var n,r,i;return function(){var o=St(this,t),a=(this.style.removeProperty(t),St(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function tr(t){return function(){this.style.removeProperty(t)}}function Ca(t,e,n){var r,i=n+"",o;return function(){var a=St(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Aa(t,e,n){var r,i,o;return function(){var a=St(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),St(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}function Ea(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var l=at(this,t),c=l.on,u=l.value[o]==null?s||(s=tr(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function Da(t,e,n){var r=(t+="")=="transform"?Do:Jn;return e==null?this.styleTween(t,Ta(t,r)).on("end.style."+t,tr(t)):typeof e=="function"?this.styleTween(t,Aa(t,r,Ge(this,"style."+t,e))).each(Ea(this._id,t)):this.styleTween(t,Ca(t,r,e),n).on("end.style."+t,null)}function Pa(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ia(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Pa(t,a,n)),r}return o._value=e,o}function Fa(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ia(t,e,n??""))}function Ra(t){return function(){this.textContent=t}}function $a(t){return function(){var e=t(this);this.textContent=e??""}}function Ga(t){return this.tween("text",typeof t=="function"?$a(Ge(this,"text",t)):Ra(t==null?"":t+""))}function Ha(t){return function(e){this.textContent=t.call(this,e)}}function Oa(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ha(i)),e}return r._value=t,r}function Ba(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Oa(t))}function Xa(){for(var t=this._name,e=this._id,n=er(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=rt(l,e);ue(l,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ut(r,this._parents,t,n)}function qa(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var c=at(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),c.on=e}),i===0&&o()})}var Va=0;function ut(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function er(){return++Va}var st=Ht.prototype;ut.prototype={constructor:ut,select:ka,selectAll:La,selectChild:st.selectChild,selectChildren:st.selectChildren,filter:va,merge:wa,selection:za,transition:Xa,call:st.call,nodes:st.nodes,node:st.node,size:st.size,empty:st.empty,each:st.each,on:Na,attr:na,attrTween:sa,style:Da,styleTween:Fa,text:Ga,textTween:Ba,remove:ba,tween:jo,delay:ua,duration:da,ease:ga,easeVarying:ya,end:qa,[Symbol.iterator]:st[Symbol.iterator]};function Ya(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ua={time:null,delay:0,duration:250,ease:Ya};function Wa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ja(t){var e,n;t instanceof ut?(e=t._id,t=t._name):(e=er(),(n=Ua).time=Fe(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&ue(l,t,e,c,a,n||Wa(l,e));return new ut(r,this._parents,t,e)}Ht.prototype.interrupt=Yo;Ht.prototype.transition=ja;function Ka(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Me(t,e){return fetch(t,e).then(Ka)}function Za(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return nr(this.cover(e,n),e,n,t)}function nr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,l=t._y0,c=t._x1,u=t._y1,g,h,f,x,v,d,p,w;if(!o)return t._root=a,t;for(;o.length;)if((v=e>=(g=(s+c)/2))?s=g:c=g,(d=n>=(h=(l+u)/2))?l=h:u=h,i=o,!(o=o[p=d<<1|v]))return i[p]=a,t;if(f=+t._x.call(null,o.data),x=+t._y.call(null,o.data),e===f&&n===x)return a.next=o,i?i[p]=a:t._root=a,t;do i=i?i[p]=new Array(4):t._root=new Array(4),(v=e>=(g=(s+c)/2))?s=g:c=g,(d=n>=(h=(l+u)/2))?l=h:u=h;while((p=d<<1|v)===(w=(x>=h)<<1|f>=g));return i[w]=o,i[p]=a,t}function Qa(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),l=1/0,c=1/0,u=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<l&&(l=i),i>u&&(u=i),o<c&&(c=o),o>g&&(g=o));if(l>u||c>g)return this;for(this.cover(l,c).cover(u,g),n=0;n<r;++n)nr(this,a[n],s[n],t[n]);return this}function Ja(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,l,c;n>t||t>=i||r>e||e>=o;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=s,s=l,a*=2,c){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function ts(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function es(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function q(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function ns(t,e,n){var r,i=this._x0,o=this._y0,a,s,l,c,u=this._x1,g=this._y1,h=[],f=this._root,x,v;for(f&&h.push(new q(f,i,o,u,g)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,g=e+n,n*=n);x=h.pop();)if(!(!(f=x.node)||(a=x.x0)>u||(s=x.y0)>g||(l=x.x1)<i||(c=x.y1)<o))if(f.length){var d=(a+l)/2,p=(s+c)/2;h.push(new q(f[3],d,p,l,c),new q(f[2],a,p,d,c),new q(f[1],d,s,l,p),new q(f[0],a,s,d,p)),(v=(e>=p)<<1|t>=d)&&(x=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=x)}else{var w=t-+this._x.call(null,f.data),k=e-+this._y.call(null,f.data),m=w*w+k*k;if(m<n){var S=Math.sqrt(n=m);i=t-S,o=e-S,u=t+S,g=e+S,r=f.data}}return r}function rs(t){if(isNaN(u=+this._x.call(null,t))||isNaN(g=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,l=this._x1,c=this._y1,u,g,h,f,x,v,d,p;if(!n)return this;if(n.length)for(;;){if((x=u>=(h=(a+l)/2))?a=h:l=h,(v=g>=(f=(s+c)/2))?s=f:c=f,e=n,!(n=n[d=v<<1|x]))return this;if(!n.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(r=e,p=d)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[d]=o:delete e[d],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[p]=n:this._root=n),this):(this._root=o,this)}function is(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function os(){return this._root}function as(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function ss(t){var e=[],n,r=this._root,i,o,a,s,l;for(r&&e.push(new q(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&r.length){var c=(o+s)/2,u=(a+l)/2;(i=r[3])&&e.push(new q(i,c,u,s,l)),(i=r[2])&&e.push(new q(i,o,u,c,l)),(i=r[1])&&e.push(new q(i,c,a,s,u)),(i=r[0])&&e.push(new q(i,o,a,c,u))}return this}function ls(t){var e=[],n=[],r;for(this._root&&e.push(new q(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,g=(s+c)/2;(o=i[0])&&e.push(new q(o,a,s,u,g)),(o=i[1])&&e.push(new q(o,u,s,l,g)),(o=i[2])&&e.push(new q(o,a,g,u,c)),(o=i[3])&&e.push(new q(o,u,g,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cs(t){return t[0]}function us(t){return arguments.length?(this._x=t,this):this._x}function hs(t){return t[1]}function fs(t){return arguments.length?(this._y=t,this):this._y}function He(t,e,n){var r=new Oe(e??cs,n??hs,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Oe(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function fn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Y=He.prototype=Oe.prototype;Y.copy=function(){var t=new Oe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=fn(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=fn(r));return t};Y.add=Za;Y.addAll=Qa;Y.cover=Ja;Y.data=ts;Y.extent=es;Y.find=ns;Y.remove=rs;Y.removeAll=is;Y.root=os;Y.size=as;Y.visit=ss;Y.visitAfter=ls;Y.x=us;Y.y=fs;function V(t){return function(){return t}}function dt(t){return(t()-.5)*1e-6}function ds(t){return t.x+t.vx}function ps(t){return t.y+t.vy}function rr(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=V(t==null?1:+t));function a(){for(var c,u=e.length,g,h,f,x,v,d,p=0;p<o;++p)for(g=He(e,ds,ps).visitAfter(s),c=0;c<u;++c)h=e[c],v=n[h.index],d=v*v,f=h.x+h.vx,x=h.y+h.vy,g.visit(w);function w(k,m,S,M,C){var D=k.data,F=k.r,P=v+F;if(D){if(D.index>h.index){var R=f-D.x-D.vx,B=x-D.y-D.vy,O=R*R+B*B;O<P*P&&(R===0&&(R=dt(r),O+=R*R),B===0&&(B=dt(r),O+=B*B),O=(P-(O=Math.sqrt(O)))/O*i,h.vx+=(R*=O)*(P=(F*=F)/(d+F)),h.vy+=(B*=O)*P,D.vx-=R*(P=1-P),D.vy-=B*P)}return}return m>f+P||M<f-P||S>x+P||C<x-P}}function s(c){if(c.data)return c.r=n[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(e){var c,u=e.length,g;for(n=new Array(u),c=0;c<u;++c)g=e[c],n[g.index]=+t(g,c,e)}}return a.initialize=function(c,u){e=c,r=u,l()},a.iterations=function(c){return arguments.length?(o=+c,a):o},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:V(+c),l(),a):t},a}function gs(t){return t.index}function dn(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Be(t){var e=gs,n=g,r,i=V(30),o,a,s,l,c,u=1;t==null&&(t=[]);function g(d){return 1/Math.min(s[d.source.index],s[d.target.index])}function h(d){for(var p=0,w=t.length;p<u;++p)for(var k=0,m,S,M,C,D,F,P;k<w;++k)m=t[k],S=m.source,M=m.target,C=M.x+M.vx-S.x-S.vx||dt(c),D=M.y+M.vy-S.y-S.vy||dt(c),F=Math.sqrt(C*C+D*D),F=(F-o[k])/F*d*r[k],C*=F,D*=F,M.vx-=C*(P=l[k]),M.vy-=D*P,S.vx+=C*(P=1-P),S.vy+=D*P}function f(){if(a){var d,p=a.length,w=t.length,k=new Map(a.map((S,M)=>[e(S,M,a),S])),m;for(d=0,s=new Array(p);d<w;++d)m=t[d],m.index=d,typeof m.source!="object"&&(m.source=dn(k,m.source)),typeof m.target!="object"&&(m.target=dn(k,m.target)),s[m.source.index]=(s[m.source.index]||0)+1,s[m.target.index]=(s[m.target.index]||0)+1;for(d=0,l=new Array(w);d<w;++d)m=t[d],l[d]=s[m.source.index]/(s[m.source.index]+s[m.target.index]);r=new Array(w),x(),o=new Array(w),v()}}function x(){if(a)for(var d=0,p=t.length;d<p;++d)r[d]=+n(t[d],d,t)}function v(){if(a)for(var d=0,p=t.length;d<p;++d)o[d]=+i(t[d],d,t)}return h.initialize=function(d,p){a=d,c=p,f()},h.links=function(d){return arguments.length?(t=d,f(),h):t},h.id=function(d){return arguments.length?(e=d,h):e},h.iterations=function(d){return arguments.length?(u=+d,h):u},h.strength=function(d){return arguments.length?(n=typeof d=="function"?d:V(+d),x(),h):n},h.distance=function(d){return arguments.length?(i=typeof d=="function"?d:V(+d),v(),h):i},h}const ms=1664525,ys=1013904223,pn=4294967296;function vs(){let t=1;return()=>(t=(ms*t+ys)%pn)/pn}function ws(t){return t.x}function xs(t){return t.y}var _s=10,Ns=Math.PI*(3-Math.sqrt(5));function Ss(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=Re(g),c=Gt("tick","end"),u=vs();t==null&&(t=[]);function g(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(v){var d,p=t.length,w;v===void 0&&(v=1);for(var k=0;k<v;++k)for(n+=(o-n)*i,s.forEach(function(m){m(n)}),d=0;d<p;++d)w=t[d],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return e}function f(){for(var v=0,d=t.length,p;v<d;++v){if(p=t[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var w=_s*Math.sqrt(.5+v),k=v*Ns;p.x=w*Math.cos(k),p.y=w*Math.sin(k)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function x(v){return v.initialize&&v.initialize(t,u),v}return f(),e={tick:h,restart:function(){return l.restart(g),e},stop:function(){return l.stop(),e},nodes:function(v){return arguments.length?(t=v,f(),s.forEach(x),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(a=1-v,e):1-a},randomSource:function(v){return arguments.length?(u=v,s.forEach(x),e):u},force:function(v,d){return arguments.length>1?(d==null?s.delete(v):s.set(v,x(d)),e):s.get(v)},find:function(v,d,p){var w=0,k=t.length,m,S,M,C,D;for(p==null?p=1/0:p*=p,w=0;w<k;++w)C=t[w],m=v-C.x,S=d-C.y,M=m*m+S*S,M<p&&(D=C,p=M);return D},on:function(v,d){return arguments.length>1?(c.on(v,d),e):c.on(v)}}}function Xe(){var t,e,n,r,i=V(-30),o,a=1,s=1/0,l=.81;function c(f){var x,v=t.length,d=He(t,ws,xs).visitAfter(g);for(r=f,x=0;x<v;++x)e=t[x],d.visit(h)}function u(){if(t){var f,x=t.length,v;for(o=new Array(x),f=0;f<x;++f)v=t[f],o[v.index]=+i(v,f,t)}}function g(f){var x=0,v,d,p=0,w,k,m;if(f.length){for(w=k=m=0;m<4;++m)(v=f[m])&&(d=Math.abs(v.value))&&(x+=v.value,p+=d,w+=d*v.x,k+=d*v.y);f.x=w/p,f.y=k/p}else{v=f,v.x=v.data.x,v.y=v.data.y;do x+=o[v.data.index];while(v=v.next)}f.value=x}function h(f,x,v,d){if(!f.value)return!0;var p=f.x-e.x,w=f.y-e.y,k=d-x,m=p*p+w*w;if(k*k/l<m)return m<s&&(p===0&&(p=dt(n),m+=p*p),w===0&&(w=dt(n),m+=w*w),m<a&&(m=Math.sqrt(a*m)),e.vx+=p*f.value*r/m,e.vy+=w*f.value*r/m),!0;if(f.length||m>=s)return;(f.data!==e||f.next)&&(p===0&&(p=dt(n),m+=p*p),w===0&&(w=dt(n),m+=w*w),m<a&&(m=Math.sqrt(a*m)));do f.data!==e&&(k=o[f.data.index]*r/m,e.vx+=p*k,e.vy+=w*k);while(f=f.next)}return c.initialize=function(f,x){t=f,n=x,u()},c.strength=function(f){return arguments.length?(i=typeof f=="function"?f:V(+f),u(),c):i},c.distanceMin=function(f){return arguments.length?(a=f*f,c):Math.sqrt(a)},c.distanceMax=function(f){return arguments.length?(s=f*f,c):Math.sqrt(s)},c.theta=function(f){return arguments.length?(l=f*f,c):Math.sqrt(l)},c}function qe(t){var e=V(.1),n,r,i;typeof t!="function"&&(t=V(t==null?0:+t));function o(s){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vx+=(i[l]-u.x)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:V(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:V(+s),a(),o):t},o}function Ve(t){var e=V(.1),n,r,i;typeof t!="function"&&(t=V(t==null?0:+t));function o(s){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vy+=(i[l]-u.y)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:V(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:V(+s),a(),o):t},o}function bs(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function ks(){return this.eachAfter(bs)}function Ls(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Ms(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function zs(t,e){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Ts(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Cs(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function As(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Es(t){for(var e=this,n=Ds(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Ds(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Ps(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Is(){return Array.from(this)}function Fs(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Rs(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*$s(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function ir(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Os)):e===void 0&&(e=Hs);for(var n=new Rt(t),r,i=[n],o,a,s,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new Rt(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(or)}function Gs(){return ir(this).eachBefore(Bs)}function Hs(t){return t.children}function Os(t){return Array.isArray(t)?t[1]:null}function Bs(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function or(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Rt(t){this.data=t,this.depth=this.height=0,this.parent=null}Rt.prototype=ir.prototype={constructor:Rt,count:ks,each:Ls,eachAfter:zs,eachBefore:Ms,find:Ts,sum:Cs,sort:As,path:Es,ancestors:Ps,descendants:Is,leaves:Fs,links:Rs,copy:Gs,[Symbol.iterator]:$s};function ge(t){return t==null?null:Xs(t)}function Xs(t){if(typeof t!="function")throw new Error;return t}var qs={depth:-1},gn={},me={};function Vs(t){return t.id}function Ys(t){return t.parentId}function ze(){var t=Vs,e=Ys,n;function r(i){var o=Array.from(i),a=t,s=e,l,c,u,g,h,f,x,v,d=new Map;if(n!=null){const p=o.map((m,S)=>Us(n(m,S,i))),w=p.map(mn),k=new Set(p).add("");for(const m of w)k.has(m)||(k.add(m),p.push(m),w.push(mn(m)),o.push(me));a=(m,S)=>p[S],s=(m,S)=>w[S]}for(u=0,l=o.length;u<l;++u)c=o[u],f=o[u]=new Rt(c),(x=a(c,u,i))!=null&&(x+="")&&(v=f.id=x,d.set(v,d.has(v)?gn:f)),(x=s(c,u,i))!=null&&(x+="")&&(f.parent=x);for(u=0;u<l;++u)if(f=o[u],x=f.parent){if(h=d.get(x),!h)throw new Error("missing: "+x);if(h===gn)throw new Error("ambiguous: "+x);h.children?h.children.push(f):h.children=[f],f.parent=h}else{if(g)throw new Error("multiple roots");g=f}if(!g)throw new Error("no root");if(n!=null){for(;g.data===me&&g.children.length===1;)g=g.children[0],--l;for(let p=o.length-1;p>=0&&(f=o[p],f.data===me);--p)f.data=null}if(g.parent=qs,g.eachBefore(function(p){p.depth=p.parent.depth+1,--l}).eachBefore(or),g.parent=null,l>0)throw new Error("cycle");return g}return r.id=function(i){return arguments.length?(t=ge(i),r):t},r.parentId=function(i){return arguments.length?(e=ge(i),r):e},r.path=function(i){return arguments.length?(n=ge(i),r):n},r}function Us(t){t=`${t}`;let e=t.length;return Te(t,e-1)&&!Te(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function mn(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Te(t,e););return t.slice(0,e)}function Te(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}const Yt=t=>()=>t;function Ws(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ct(t,e,n){this.k=t,this.x=e,this.y=n}ct.prototype={constructor:ct,scale:function(t){return t===1?this:new ct(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ct(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var he=new ct(1,0,0);ar.prototype=ct.prototype;function ar(t){for(;!t.__zoom;)if(!(t=t.parentNode))return he;return t.__zoom}function ye(t){t.stopImmediatePropagation()}function Mt(t){t.preventDefault(),t.stopImmediatePropagation()}function js(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ks(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function yn(){return this.__zoom||he}function Zs(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Qs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Js(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function tl(){var t=js,e=Ks,n=Js,r=Zs,i=Qs,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=$o,c=Gt("start","zoom","end"),u,g,h,f=500,x=150,v=0,d=10;function p(y){y.property("__zoom",yn).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",R).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(y,b,N,L){var z=y.selection?y.selection():y;z.property("__zoom",yn),y!==z?S(y,b,N,L):z.interrupt().each(function(){M(this,arguments).event(L).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},p.scaleBy=function(y,b,N,L){p.scaleTo(y,function(){var z=this.__zoom.k,A=typeof b=="function"?b.apply(this,arguments):b;return z*A},N,L)},p.scaleTo=function(y,b,N,L){p.transform(y,function(){var z=e.apply(this,arguments),A=this.__zoom,E=N==null?m(z):typeof N=="function"?N.apply(this,arguments):N,I=A.invert(E),$=typeof b=="function"?b.apply(this,arguments):b;return n(k(w(A,$),E,I),z,a)},N,L)},p.translateBy=function(y,b,N,L){p.transform(y,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof N=="function"?N.apply(this,arguments):N),e.apply(this,arguments),a)},null,L)},p.translateTo=function(y,b,N,L,z){p.transform(y,function(){var A=e.apply(this,arguments),E=this.__zoom,I=L==null?m(A):typeof L=="function"?L.apply(this,arguments):L;return n(he.translate(I[0],I[1]).scale(E.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof N=="function"?-N.apply(this,arguments):-N),A,a)},L,z)};function w(y,b){return b=Math.max(o[0],Math.min(o[1],b)),b===y.k?y:new ct(b,y.x,y.y)}function k(y,b,N){var L=b[0]-N[0]*y.k,z=b[1]-N[1]*y.k;return L===y.x&&z===y.y?y:new ct(y.k,L,z)}function m(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function S(y,b,N,L){y.on("start.zoom",function(){M(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(L).end()}).tween("zoom",function(){var z=this,A=arguments,E=M(z,A).event(L),I=e.apply(z,A),$=N==null?m(I):typeof N=="function"?N.apply(z,A):N,K=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),H=z.__zoom,U=typeof b=="function"?b.apply(z,A):b,Q=l(H.invert($).concat(K/H.k),U.invert($).concat(K/U.k));return function(W){if(W===1)W=U;else{var X=Q(W),kt=K/X[2];W=new ct(kt,$[0]-X[0]*kt,$[1]-X[1]*kt)}E.zoom(null,W)}})}function M(y,b,N){return!N&&y.__zooming||new C(y,b)}function C(y,b){this.that=y,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,b),this.taps=0}C.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,b){return this.mouse&&y!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var b=et(this.that).datum();c.call(y,this.that,new Ws(y,{sourceEvent:this.sourceEvent,target:p,type:y,transform:this.that.__zoom,dispatch:c}),b)}};function D(y,...b){if(!t.apply(this,arguments))return;var N=M(this,b).event(y),L=this.__zoom,z=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,r.apply(this,arguments)))),A=lt(y);if(N.wheel)(N.mouse[0][0]!==A[0]||N.mouse[0][1]!==A[1])&&(N.mouse[1]=L.invert(N.mouse[0]=A)),clearTimeout(N.wheel);else{if(L.k===z)return;N.mouse=[A,L.invert(A)],Kt(this),N.start()}Mt(y),N.wheel=setTimeout(E,x),N.zoom("mouse",n(k(w(L,z),N.mouse[0],N.mouse[1]),N.extent,a));function E(){N.wheel=null,N.end()}}function F(y,...b){if(h||!t.apply(this,arguments))return;var N=y.currentTarget,L=M(this,b,!0).event(y),z=et(y.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",K,!0),A=lt(y,N),E=y.clientX,I=y.clientY;Bn(y.view),ye(y),L.mouse=[A,this.__zoom.invert(A)],Kt(this),L.start();function $(H){if(Mt(H),!L.moved){var U=H.clientX-E,Q=H.clientY-I;L.moved=U*U+Q*Q>v}L.event(H).zoom("mouse",n(k(L.that.__zoom,L.mouse[0]=lt(H,N),L.mouse[1]),L.extent,a))}function K(H){z.on("mousemove.zoom mouseup.zoom",null),Xn(H.view,L.moved),Mt(H),L.event(H).end()}}function P(y,...b){if(t.apply(this,arguments)){var N=this.__zoom,L=lt(y.changedTouches?y.changedTouches[0]:y,this),z=N.invert(L),A=N.k*(y.shiftKey?.5:2),E=n(k(w(N,A),L,z),e.apply(this,b),a);Mt(y),s>0?et(this).transition().duration(s).call(S,E,L,y):et(this).call(p.transform,E,L,y)}}function R(y,...b){if(t.apply(this,arguments)){var N=y.touches,L=N.length,z=M(this,b,y.changedTouches.length===L).event(y),A,E,I,$;for(ye(y),E=0;E<L;++E)I=N[E],$=lt(I,this),$=[$,this.__zoom.invert($),I.identifier],z.touch0?!z.touch1&&z.touch0[2]!==$[2]&&(z.touch1=$,z.taps=0):(z.touch0=$,A=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(z.taps<2&&(g=$[0],u=setTimeout(function(){u=null},f)),Kt(this),z.start())}}function B(y,...b){if(this.__zooming){var N=M(this,b).event(y),L=y.changedTouches,z=L.length,A,E,I,$;for(Mt(y),A=0;A<z;++A)E=L[A],I=lt(E,this),N.touch0&&N.touch0[2]===E.identifier?N.touch0[0]=I:N.touch1&&N.touch1[2]===E.identifier&&(N.touch1[0]=I);if(E=N.that.__zoom,N.touch1){var K=N.touch0[0],H=N.touch0[1],U=N.touch1[0],Q=N.touch1[1],W=(W=U[0]-K[0])*W+(W=U[1]-K[1])*W,X=(X=Q[0]-H[0])*X+(X=Q[1]-H[1])*X;E=w(E,Math.sqrt(W/X)),I=[(K[0]+U[0])/2,(K[1]+U[1])/2],$=[(H[0]+Q[0])/2,(H[1]+Q[1])/2]}else if(N.touch0)I=N.touch0[0],$=N.touch0[1];else return;N.zoom("touch",n(k(E,I,$),N.extent,a))}}function O(y,...b){if(this.__zooming){var N=M(this,b).event(y),L=y.changedTouches,z=L.length,A,E;for(ye(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),A=0;A<z;++A)E=L[A],N.touch0&&N.touch0[2]===E.identifier?delete N.touch0:N.touch1&&N.touch1[2]===E.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(E=lt(E,this),Math.hypot(g[0]-E[0],g[1]-E[1])<d)){var I=et(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return p.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Yt(+y),p):r},p.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Yt(!!y),p):t},p.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Yt(!!y),p):i},p.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Yt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),p):e},p.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],p):[o[0],o[1]]},p.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(y){return arguments.length?(n=y,p):n},p.duration=function(y){return arguments.length?(s=+y,p):s},p.interpolate=function(y){return arguments.length?(l=y,p):l},p.on=function(){var y=c.on.apply(c,arguments);return y===c?p:y},p.clickDistance=function(y){return arguments.length?(v=(y=+y)*y,p):Math.sqrt(v)},p.tapDistance=function(y){return arguments.length?(d=+y,p):d},p}var sr={};Object.defineProperty(sr,"__esModule",{value:!0});const el="bcdfghjklmnpqrstvwxyzbpcrtpcrddrtplmnplmnbbcbcdrbnmklhgd",nl="aeiou";class rl{constructor(e=[],n=3,r="",i=""){this.themeWords=e,this.themeWordDensity=n,this.vowels=nl+r,this.consonants=el+i}createWord(e,n=!1,r=!1){let i="";if(!r&&this.themeWords.length&&Math.floor(Math.random()*this.themeWordDensity)<1)i=this.themeWords[Math.floor(Math.random()*this.themeWords.length)];else{let o="consonants";for(let a=0;a<e;a++)o==="consonants"?(i+=this.consonants.substr(Math.floor(Math.random()*this.consonants.length),1),o="vowels"):(i+=this.vowels.substr(Math.floor(Math.random()*this.vowels.length),1),o="consonants")}return n&&(i=this._jsUcfirst(i)),i}createParagraph(e){let n="",r=!0;for(let i=0;i<e;i++)n+=this.createWord(2+Math.floor(Math.random()*9),r),Math.floor(Math.random()*9)<1?(n+=". ",r=!0):(n+=" ",r=!1);return n.trim()+"."}createFullName(e=!0){return(e?Math.random()>.5?"Mr. ":"Ms. ":"")+this.createWord(3+Math.floor(Math.random()*5),!0,!0)+" "+this.createWord(2+Math.floor(Math.random()*9),!0,!0)}createEmail(e){const n=typeof e>"u"?"domain.com":e;return this.createWord(3+Math.floor(Math.random()*5),!1,!0)+"."+this.createWord(2+Math.floor(Math.random()*9),!1,!0)+"@"+n}_jsUcfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}}var il=sr.default=rl;const lr=new il;function ve(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function Ct(t,e){return Math.floor(Math.random()*(e-t+1)+t)}const cr=(t,e=1)=>Tn(e).map(()=>ol(t)).reduce((n,r)=>{const i=n.nodes[Ct(n.nodes.length/2,n.nodes.length-1)],o=r.nodes[Ct(r.nodes.length/2,r.nodes.length-1)];return n.nodes.push(...r.nodes),n.links.push(...r.links),n.parents.push(...r.parents),i&&Math.random()>.5&&n.links.push({source:i.id,target:o.id,id:`${i.id}-${o.id}`}),n},{nodes:[],links:[],parents:[]}),ol=t=>{let e={id:ve(),name:vn()};const n=[e],r=Tn(t).map(a=>(Math.random()>.75&&(e={id:ve(),name:vn()},n.push(e)),{isServer:a===0,name:al(e.name),id:ve(),parent:e.id})),o=[...Ce([...r])].map(([a,s])=>({source:a.id,target:s.id,id:`${a.id}-${s.id}`}));return{nodes:r,links:o,parents:n}};function Ce(t,e=[]){let n=-1,r;for(;++n<t.length;)if(r=n+1,t[r]&&(e.push([t[n],t[r]]),Math.random()>.25)){const i=Ct(1,5),o=Ct(1,5);e.push(...Ce([t[r],...t.splice(r+1,i)])),e[o]&&e.push(...Ce([t[r],...t.splice(r+1,o),...Math.random()>.75?[t[Ct(r,t.length-1)]]:[]]))}return e}const ur=" Corp.";function vn(){return lr.createFullName(!1).split(" ")[0]+ur}function al(t){const e=t.replace(ur,"")+"Corp.com";return lr.createEmail(e)}class At{constructor(e){_(this,"id");_(this,"parent");_(this,"name");_(this,"level");_(this,"type");_(this,"linkSignature",[]);_(this,"baseLinks",[]);_(this,"parentLink");_(this,"isServer",!1);_(this,"start");_(this,"end");_(this,"removeClassName");_(this,"className");_(this,"shape");_(this,"x");_(this,"y");_(this,"fx");_(this,"fy");_(this,"vx");_(this,"vy");_(this,"index");_(this,"r");this.id=e.id,this.parent=e.parent,this.name=e.name,this.level=e.level,this.type=e.type,this.parentLink=e.parentLink,this.className=e.className,this.shape=e.shape,e.isServer&&(this.isServer=e.isServer),e.start&&(this.start=new Date(e.start)),e.end&&(this.end=new Date(e.end))}}class hr{constructor(e){_(this,"source");_(this,"target");_(this,"id");_(this,"parent");_(this,"type");_(this,"parentNode");_(this,"baseLinks",[]);this.source=e.source,this.target=e.target,this.id=e.id,this.parent=e.parent,this.type=e.type,this.parentNode=e.parentNode}}class sl{constructor(e){_(this,"source");_(this,"target");_(this,"id");_(this,"graphLinks",[]);this.source=e.source,this.target=e.target,this.id=e.id}}class ll{constructor(e){_(this,"source");_(this,"target");_(this,"id");_(this,"graphLinks",[]);_(this,"currentTimeState");_(this,"data");this.source=e.source,this.target=e.target,this.id=e.id,this.graphLinks=e.graphLinks,this.data=e.data}}function G(t){return t||0}const _t=(t,e,n)=>(t.has(e)||t.set(e,n),t.get(e)),J=()=>{};function cl(t){const e=window;e.Cypress&&(e.graph=t)}function wn(t){return[...new Set(t)].sort()}function ul(t,e=!0){const n=Object.assign(t);e&&(n.nodes=n.nodes.filter(d=>d.id==null||d.parent==null?(console.warn("A graphData node did not contain all required properties and is being removed",{errorNode:d}),!1):!0),n.links=n.links.filter(d=>d.source==null||d.source==null?(console.warn("A graphData link did not contain all required properties and is being removed",{errorLink:d}),!1):!0)),n.parents||(n.parents=[]);const r=new Map(n.parents.map(d=>[d.id,d])),i=new Map;n.nodes.forEach(d=>{const{className:p,name:w}=r.get(d.parent)||{};_t(i,d.parent,new At({...d,className:p,name:w,id:d.parent,parent:tt.rootNodeName,level:"super",type:"keyNode"}))});const o=new Map(n.nodes.map(d=>[d.id,new At({...d,level:"sub",type:"keyNode"})])),a=new Map;n.links.forEach(d=>{const{source:p,target:w}=d,k=[p,w].sort().join(tt.idDelimiter);_t(a,k,new sl({source:p,target:w,id:k}))}),a.forEach(d=>{const p=o.get(d.source),w=o.get(d.target);p.parent===w.parent?(p.linkSignature.push(w.id),w.linkSignature.push(p.id)):(p.linkSignature.push(w.parent),w.linkSignature.push(p.parent)),p.baseLinks.push(d.id),w.baseLinks.push(d.id)});const s=new Map;o.forEach(d=>{d.linkSignature=[d.parent,...wn(d.linkSignature),tt.groupNodeSuffix];const p=d.linkSignature.join(tt.idDelimiter);_t(s,p,new At({id:p,parent:d.parent,level:"group",type:"keyNode"})),d.parent=p});const l=[{id:tt.rootNodeName},...i.values(),...s.values(),...o.values()],c=ze().id(d=>d.id).parentId(d=>d.parent)(l),u=new Map(c.descendants().map(d=>[d.id,d])),g=new Map,h=new Map;a.forEach(d=>{var k,m,S,M,C,D,F,P,R,B,O,y,b,N,L,z,A,E,I,$,K,H,U,Q,W;const p=u.get(d.source),w=u.get(d.target);if(((k=p==null?void 0:p.parent)==null?void 0:k.id)===((m=w==null?void 0:w.parent)==null?void 0:m.id))console.warn((S=p==null?void 0:p.parent)==null?void 0:S.id);else if((M=p.parent)!=null&&M.parent&&((C=w.parent)!=null&&C.parent)&&((F=(D=p.parent)==null?void 0:D.parent)==null?void 0:F.id)===((R=(P=w.parent)==null?void 0:P.parent)==null?void 0:R.id)){const X=xn(p.parent,w.parent,h,d);vt(p,h,g,d,X),vt(w,h,g,d,X)}else if((O=(B=p.parent)==null?void 0:B.parent)!=null&&O.parent&&((b=(y=w.parent)==null?void 0:y.parent)!=null&&b.parent)&&((z=(L=(N=p.parent)==null?void 0:N.parent)==null?void 0:L.parent)==null?void 0:z.id)===((I=(E=(A=w.parent)==null?void 0:A.parent)==null?void 0:E.parent)==null?void 0:I.id)){const X=xn(p.parent.parent,w.parent.parent,h,d),kt=vt(p.parent,h,g,d,X),_r=vt(w.parent,h,g,d,X);vt(p,h,g,d,kt),vt(w,h,g,d,_r)}else console.warn((H=(K=($=p.parent)==null?void 0:$.parent)==null?void 0:K.parent)==null?void 0:H.id,(W=(Q=(U=w.parent)==null?void 0:U.parent)==null?void 0:Q.parent)==null?void 0:W.id)}),a.forEach(d=>{d.graphLinks=wn(d.graphLinks)});const f=[{id:tt.rootLinkName},...h.values()];return{nodes:[{id:tt.rootNodeName},...i.values(),...s.values(),...o.values(),...g.values()],links:f,baseLinks:[...a.values()]}}function xn(t,e,n,r){var l;const i=t.id,o=e.id,a=t.parent.id,s=hl(i,o);return(l=_t(n,s,new hr({source:i,target:o,id:s,parent:tt.rootLinkName,type:"siblingLink",parentNode:a})))==null||l.baseLinks.push(r.id),r.graphLinks.push(s),s}function vt(t,e,n,r,i){var s,l;const o=[t.parent.id,i,tt.parentLinkNodeSuffix].join(tt.idDelimiter);(s=_t(n,o,new At({id:o,type:"parentLinkNode",parent:t.parent.id,level:t.parent.data.level,parentLink:i})))==null||s.baseLinks.push(r.id);const a=[t.id,o].join(tt.idDelimiter);return(l=_t(e,a,new hr({source:t.id,target:o,id:a,parent:i,type:"parentLink",parentNode:t.parent.id})))==null||l.baseLinks.push(r.id),r.graphLinks.push(a),a}function hl(t,e){return[t,e].sort().join(tt.idDelimiter)}const fl={idDelimiter:"/",parentLinkNodeSuffix:"linkNode",groupNodeSuffix:"groupNode",rootNodeName:"rootNode",rootLinkName:"rootLink"},tt=fl;class dl{constructor({graphData:e,onSelectionChange:n=J,onPreviewChange:r=J,onTimeChange:i=J,onDataChange:o=J,previouslyParsedGraphData:a}){_(this,"rootNode");_(this,"rootLink");_(this,"baseLinks",new Map);_(this,"allNodes",new Map);_(this,"allLinks",new Map);_(this,"onDataChange");_(this,"currentTime",0);_(this,"pastSet",new Set);_(this,"presentSet",new Set);_(this,"onTimeChange");_(this,"selectionSet",new Set);_(this,"previewSet",new Set);_(this,"onSelectionChange");_(this,"onPreviewChange");this.onSelectionChange=n,this.onPreviewChange=r,this.onTimeChange=i,this.onDataChange=o,this.updateGraphData(e,{previouslyParsedGraphData:a,mergeWithCurrentGraphData:a!=null,fireEvent:!1})}get parsedGraphData(){return{nodes:Array.from(this.allNodes.values()).map(e=>({...e.data,x:e.x,y:e.y})),links:Array.from(this.allLinks.values()).map(e=>e.data),baseLinks:Array.from(this.baseLinks.values()).map(e=>e.data)}}updateGraphData(e,n){const{mergeWithCurrentGraphData:r=!0,previouslyParsedGraphData:i,fireEvent:o=!0}=n||{},a=ul(e);if(r){const s=i!=null?new Map(i.nodes.map(l=>[l.id,l])):this.allNodes.size>0?this.allNodes:null;s!=null&&a.nodes.forEach(l=>{const c=s.get(l.id);c&&(l.x=c.x,l.y=c.y)})}this.stratifyGraph(a),o&&this.onDataChange()}stratifyGraph(e){const n=Object.assign(e);this.rootLink=ze().id(r=>r.id).parentId(r=>r.parent)(n.links),this.rootNode=ze().id(r=>r.id).parentId(r=>r.parent)(n.nodes),this.allLinks=new Map(this.rootLink.descendants().map(r=>[r.id,r])),this.allNodes=new Map(this.rootNode.descendants().map(r=>[r.id,r])),this.baseLinks=new Map(n.baseLinks.map(r=>[r.id,new ll({source:this.allNodes.get(r.source),target:this.allNodes.get(r.target),id:r.id,graphLinks:r.graphLinks.map(i=>this.allLinks.get(i)),data:r})])),this.allNodes.forEach(r=>{r.graphLinks=[],r.parent!=null&&(r.baseLinks=r.data.baseLinks.map(i=>this.baseLinks.get(i)),r.type=r.data.type,r.data.parentLink&&(r.parentLink=this.allLinks.get(r.data.parentLink)),r.x=r.data.x,r.y=r.data.y,r.fx=r.data.fx,r.fy=r.data.fy)}),this.allLinks.forEach(r=>{if(r.parent==null)return;r.source=this.allNodes.get(r.data.source),r.target=this.allNodes.get(r.data.target),r.baseLinks=r.data.baseLinks.map(o=>this.baseLinks.get(o)),r.type=r.data.type,this.allNodes.get(r.data.parentNode).graphLinks.push(r)})}get timeState(){return{currentTime:this.currentTime,pastNodeIds:_n(this.pastSet),presentNodeIds:_n(this.presentSet)}}setTimeState(e,n=!0){this.clearTime(!1);const{currentTime:r,pastNodeIds:i,presentNodeIds:o}=e;this.currentTime=r,this.pastSet=Nn(i,this.allNodes),this.presentSet=Nn(o,this.allNodes),this.allNodes.forEach(u=>u.data.isServer?void 0:u.currentTimeState="future"),[[this.pastSet,"past"],[this.presentSet,"present"]].forEach(([u,g])=>{u.forEach(h=>{let f=h;for(;f;)f.currentTimeState=g,f=f.parent})}),this.allLinks.forEach(u=>u.currentTimeState="future"),this.baseLinks.forEach(u=>u.currentTimeState=void 0);const s=new Set,l=new Set;this.baseLinks.forEach(u=>{u.currentTimeState=pl(u.source,u.target),u.currentTimeState==="past"&&s.add(u),u.currentTimeState==="present"&&l.add(u)}),[[s,"past"],[l,"present"]].forEach(([u,g])=>{u.forEach(h=>{h.graphLinks.forEach(f=>{f.currentTimeState=g})})}),n&&this.onTimeChange()}clearTime(e=!0){this.currentTime=0,this.pastSet.clear(),this.presentSet.clear(),this.allNodes.forEach(n=>n.currentTimeState=void 0),this.allLinks.forEach(n=>n.currentTimeState=void 0),this.baseLinks.forEach(n=>n.currentTimeState=void 0),e&&this.onTimeChange()}clearSet(e){const n=e==="preview"?this.previewSet:this.selectionSet,r=e==="preview"?"previewed":"selected",i=e==="preview"?"previewedFocus":"selectedFocus",o=e==="preview"?"previewedParent":"selectedParent";n.forEach(a=>{a[r]=void 0,a[i]=void 0,a[o]=void 0}),n.clear()}addToSet(e,n){const r=n==="preview"?this.previewSet:this.selectionSet,i=n==="preview"?"previewed":"selected",o=n==="preview"?"previewedFocus":"selectedFocus",a=n==="preview"?"previewedParent":"selectedParent";function s(g){let h=g.parent;for(;h;)h[a]=!0,r.add(h),h=h.parent}function l(g){if(!(g==null||g.parent==null))if(g.data.isServer){const h=g.ancestors().find(x=>x.type==="keyNode"&&x.depth===1)||g,f=h.leaves().find(x=>x.type==="keyNode")||g;[h,f].forEach(x=>{x[i]=!0,r.add(x)})}else g[i]=!0,r.add(g),s(g)}function c(g){g[i]=!0,r.add(g)}if(e.data.isServer){const g=e.ancestors().find(f=>f.type==="keyNode"&&f.depth===1)||e,h=g.leaves().find(f=>f.type==="keyNode")||e;g[o]=!0,l(g),e=h}e[o]=!0,l(e),e.baseLinks.length>0?e.baseLinks.forEach(g=>{g.graphLinks.forEach(h=>{c(h)}),l(g.source),l(g.target)}):e.graphLinks.filter(h=>h.type="parentLink").forEach(h=>{const f=h.parent;f&&f.parent!=null&&(c(f),l(f.target),l(f.source))})}selectNodes(e,n=!0){this.clearSelection(!1);for(let r=0;r<e.length;r++){const i=e[r],o=typeof i=="string"?this.allNodes.get(i):i;if(!o)return;this.addNodeToSelection(o,!1),n&&this.onSelectionChange(o,Array.from(this.selectionSet))}}addNodeToSelection(e,n=!0){this.addToSet(e,"selection"),n&&this.onSelectionChange(e,Array.from(this.selectionSet))}clearSelection(e=!0){this.clearSet("selection"),e&&this.onSelectionChange()}previewNode(e,n=!0){const r=typeof e=="string"?this.allNodes.get(e):e;r&&(this.clearPreview(!1),this.addNodeToPreview(r,!1),n&&this.onPreviewChange(r,Array.from(this.selectionSet)))}addNodeToPreview(e,n=!0){this.addToSet(e,"preview"),n&&this.onPreviewChange(e,Array.from(this.selectionSet))}clearPreview(e=!0){this.clearSet("preview"),e&&this.onPreviewChange()}}const _n=t=>Array.from(t).map(e=>e.id||""),Nn=(t,e)=>new Set(t.map(n=>e.get(n)).filter(n=>n)),pl=(t,e)=>{const n=t.currentTimeState,r=e.currentTimeState;if(n===r)return n;if(n==="future"||r==="future")return"future";if(n==="past"||r==="past")return"past";if(n==="present"||r==="present")return"present"},fr=([t,e],n)=>{let r=t,i=e;if(!n)return{x:r,y:i,wasClamped:!1};if(n<0)return{x:0,y:0,wasClamped:!0};const o=Math.hypot(r,i);if(o>n){const s=Math.atan2(r,i);r=Math.sin(s)*n,i=Math.cos(s)*n}const a=o>n;return{x:r,y:i,wasClamped:a,xyRadius:o,radius:n}};function dr(t=30){let e,n;const r=typeof t!="function"?gl(+t):t;function i(a){for(let s=0,l=e.length;s<l;++s){const c=e[s],u=n[s],g=c.x+c.vx,h=c.y+c.vy,{wasClamped:f,x,y:v}=fr([g,h],u);f&&(c.vx=0,c.vy=0,c.x=x,c.y=v)}}function o(){if(!e)return;let a;const s=e.length;for(n=new Array(s),a=0;a<s;++a)n[a]=+r(e[a],a,e)}return i.initialize=function(a){e=a,o()},i}function gl(t){return function(...e){return t}}function pr(t){var n;(((n=t.children)==null?void 0:n.filter(r=>r.type==="parentLinkNode"))||[]).forEach(r=>{const{source:i,target:o}=r.parentLink;let a=G(i.x)-G(o.x),s=G(i.y)-G(o.y);t.id===i.id&&(a*=-1,s*=-1);const[c,u]=gr(a,s,t.r||1);r.fx=c,r.fy=u})}function gr(t,e,n){const r=Math.atan2(t,e),i=Math.sin(r)*n,o=Math.cos(r)*n;return[i,o]}function ml(t,e,n,r,i=1,o="by"){const a=n-t,s=r-e,l=o==="to"?i:Math.hypot(a,s)-i,[c,u]=gr(a,s,l);return{source:{x:t,y:e},target:{x:t+c,y:e+u}}}const mr=t=>Math.PI*t*t,yr=t=>Math.sqrt(t/Math.PI),Nt=({d:t,zk:e=1,rk:n=1,zx:r=0,zy:i=0,tx:o=0,ty:a=0})=>`translate(${G(t.x)*n*e+r+o}, ${G(t.y)*n*e+i+a})`,$t=t=>t.previewedFocus||t.selectedFocus||t.selectedParent||t.previewedParent||!1,vr=t=>t.selected||t.previewed||$t(t),yl=t=>t.selected||t.selectedFocus||t.selectedParent||!1,vl=t=>t.previewed||t.previewedFocus||t.previewedParent||!1,Sn=t=>vl(t)?3:yl(t)?2:t.data instanceof At?1:0,Ye=(t,e)=>Sn(t)-Sn(e),it=(t,e,n)=>{var i,o;const r=n[e];t.data.removeClassName&&((i=r==null?void 0:r.classList)==null||i.remove(t.data.removeClassName)),t.data.className&&((o=r==null?void 0:r.classList)==null||o.add(t.data.className))},mt=t=>t.type!=="parentLinkNode"?t.data.id:null,wl="-label",wr=t=>mt(t)+wl;function bn(t,e=0){return e=Math.pow(10,e),Math.round(t*e)/e}const xl="http://www.w3.org/2000/svg",_l=t=>document.createElementNS(xl,t),T={graphRoot:"graphRoot",isZooming:"isZooming",transformWrapper:"transformWrapper",superGraph:"superGraph",groupGraph:"groupGraph",subGraph:"subGraph",superNode:"superNode",groupNode:"groupNode",subNode:"subNode",serverNode:"serverNode",computerNode:"computerNode",softwareNode:"softwareNode",superNodeCountLabel:"superNodeCountLabel",superNodeNameLabel:"superNodeNameLabel",subNodeNameLabel:"subNodeNameLabel",occludedLabel:"occludedLabel",hiddenLabel:"hiddenLabel",keyNode:"keyNode",siblingLink:"siblingLink",parentLinkNode:"parentLinkNode",parentLink:"parentLink",previewed:"previewed",previewedFocus:"previewedFocus",previewedParent:"previewedParent",selected:"selected",selectedFocus:"selectedFocus",selectedParent:"selectedParent",future:"future",present:"present",past:"past"};class Ue{constructor({rootNode:e,rootSelection:n,parentGraph:r,graphHandler:i}){_(this,"rootNode");_(this,"parentNode");_(this,"links");_(this,"nodes");_(this,"keyNodes");_(this,"parentLinkNodes");_(this,"simulation");_(this,"simulationForces",[]);_(this,"rootSelection");_(this,"rootGroupSelection");_(this,"childGraphRootSelection");_(this,"linkSelection");_(this,"nodeSelection");_(this,"labelSelection");_(this,"parentGraph");_(this,"childGraphs",[]);_(this,"graphHandler");_(this,"isHidden",!1);this.rootNode=e,this.parentNode=this.rootNode.parent||void 0,this.links=this.rootNode.graphLinks||[],this.nodes=this.rootNode.children||[],this.keyNodes=this.nodes.filter(o=>o.type==="keyNode")||[],this.parentLinkNodes=this.nodes.filter(o=>o.type==="parentLinkNode")||[],this.parentGraph=r,this.graphHandler=i,this.rootSelection=n}initialize(e=!1){this.initializeForces(),this.initializeSelection(),e&&this.hideLayout(),this.initializeSimulationLayout()}initializeForces(){this.simulation=Ss(this.nodes).on("tick",this.drawLayout.bind(this))}initializeSelection(){}initializeSimulationLayout(){this.useGraphForces(),this.simulation.alphaDecay(.001).alphaTarget(.7).tick(300).alphaTarget(0).alphaDecay(.1).restart().tick(500).stop(),this.drawLayout()}initializeChildGraphs(e){this.childGraphRootSelection&&e!=null&&(this.childGraphs=[],this.childGraphRootSelection.filter(n=>n.type==="keyNode").each((n,r,i)=>{var o;(o=this.childGraphs)==null||o.push(new e({rootNode:n,rootSelection:et(i[r]),parentGraph:this,graphHandler:this.graphHandler}))}))}callChildrenRecursively(e){var n;this[e](),(n=this.childGraphs)==null||n.forEach(r=>r.callChildrenRecursively(e))}useGraphForces(){for(let e=0;e<this.simulationForces.length;e++){const{name:n,force:r}=this.simulationForces[e];this.simulation.force(n,r)}}useSimpleForces(){for(let e=0;e<this.simulationForces.length;e++){const{name:n,force:r,optional:i}=this.simulationForces[e],o=i?null:r;this.simulation.force(n,o)}}reheat(e=0){var n;this.simulation.alphaTarget(e).restart(),(n=this.childGraphs)==null||n.forEach(r=>r.reheat(e))}cool(){var e;this.simulation.alphaTarget(0),(e=this.childGraphs)==null||e.forEach(n=>n.cool())}freeze(){var e;this.simulation.stop(),(e=this.childGraphs)==null||e.forEach(n=>n.freeze())}drawLayout(){}drawInteraction(){[this.rootSelection,this.rootGroupSelection,this.linkSelection,this.nodeSelection,this.labelSelection].forEach(e=>{e==null||e.classed(T.selected,n=>!!n.selected).classed(T.selectedFocus,n=>!!n.selectedFocus).classed(T.selectedParent,n=>!!n.selectedParent).classed(T.previewed,n=>!!n.previewed).classed(T.previewedFocus,n=>!!n.previewedFocus).classed(T.previewedParent,n=>!!n.previewedParent)})}drawTime(e=[]){const n=[T.present,T.past,T.future].join(" ");[this.nodeSelection,this.linkSelection,this.labelSelection,...e].forEach(r=>{r==null||r.classed(n,!1).filter(i=>!i.data.isServer).classed(T.past,i=>i.currentTimeState==="past").classed(T.present,i=>i.currentTimeState==="present").classed(T.future,i=>i.currentTimeState==="future")})}drawUpdateLabel(){}drawUpdateNodeVisual(){}hideLayout(){this.isHidden||this.rootGroupSelection.remove(),this.isHidden=!0}showLayout(){var e;this.isHidden&&((e=this.rootSelection.node())==null||e.appendChild(this.rootGroupSelection.node())),this.isHidden=!1}}function Nl(t,e=1,n=0,r=0){t=t<3?3:t,n=n*Math.PI/180;const i=2*Math.PI/t,o=[];for(let a=0;a<t;a++)o.push([r+bn(e*Math.sin(a*i+n),2),r+bn(e*Math.cos(a*i+n),2)]);return o}function xr(t,e,n,r){return Nl(t,e,n,r).map(i=>i.join(",")).join(" ")}const Sl={triangleUp:[3,180],triangleDown:[3,0],diamond:[4,90],square:[4,45],pentagonUp:[5,180],pentagonDown:[5,0],hexagonUp:[6,0],hexagonDown:[6,90]},kn={};function bl(t,e=1,n){const r=[t,e,n].join("-");let i=kn[r];if(i==null){const[o,a]=Sl[t],s=Math.PI*e*e,l=1+o*.03,c=kl(o,s)*l;i=xr(o,c,a,n),kn[r]=i}return i}function kl(t,e=Math.PI){return Math.sqrt(e*2/(Math.sin(2*Math.PI/t)*t))}const oe=class oe extends Ue{constructor(e){super(e),super.initialize(!0)}initializeForces(){this.nodes.forEach(o=>o.r=o.type==="parentLinkNode"?1:oe.radius(o));const e=Xe().strength(o=>o.type==="keyNode"?-4:0),n=Be(this.links).strength(0).distance(this.rootNode.r*.3),r=dr(o=>o.type==="keyNode"?this.rootNode.r-2:0),i=!0;this.simulationForces=[{name:"positionParentLinkNodes",force:()=>pr(this.rootNode)},{name:"link",force:n,optional:i},{name:"charge",force:e,optional:i},{name:"x",force:qe(0),optional:i},{name:"y",force:Ve(0),optional:i},{name:"clamp",force:r}],super.initializeForces()}initializeSelection(){this.rootGroupSelection=this.rootSelection.data([this.rootNode]).append("g").attr(T.subGraph,!0).attr("transform-origin","center").attr("cy-test","subGSelection").attr("id",mt),this.linkSelection=this.rootGroupSelection.selectAll("line").data(this.links).join("line").classed(T.siblingLink,e=>e.type==="siblingLink").classed(T.parentLink,e=>e.type==="parentLink").attr("cy-test","subLinkSelection").attr("id",mt),this.nodeSelection=this.rootGroupSelection.selectAll(".testing").data(this.nodes).join("g").classed("testing",!0).attr("cy-test","beaconsGraph").attr("id",mt).each(it).classed(T.parentLinkNode,e=>e.type==="parentLinkNode").classed(T.keyNode,e=>e.type==="keyNode").classed(T.subNode,!0).classed(T.softwareNode,!0).on("click",this.graphHandler.clickNode.bind(this.graphHandler)).on("mouseover",this.graphHandler.mouseOverNode.bind(this.graphHandler)),this.drawUpdateNodeVisual(),this.labelSelection=this.rootGroupSelection.append("g").attr("cy-test","selectedLabel").selectAll("text").data(this.nodes.filter(e=>e.type==="keyNode")).join("text").attr("id",wr).each(it).classed(T.subNodeNameLabel,!0).text(Ln),super.initializeSelection()}drawUpdateNodeVisual(){var e;(e=this.labelSelection)==null||e.each(it),this.nodeSelection.each(it),this.nodeSelection.selectChildren().remove(),this.nodeSelection.append(n=>_l(n.data.shape==="circle"||n.data.shape==null?"circle":"polygon")).attr("r",n=>n.r||0).attr("points",n=>n.data.shape&&n.data.shape!=="circle"?bl(n.data.shape,G(n.r)+1):null)}drawLayout(){var n;if(!this.parentNode)return;const{rk:e=1}=this.graphHandler.zoomTransform;this.linkSelection.attr("x1",r=>G(r.source.x)*e).attr("y1",r=>G(r.source.y)*e).attr("x2",r=>G(r.target.x)*e).attr("y2",r=>G(r.target.y)*e),this.nodeSelection.attr("transform",r=>Nt({d:r,rk:e})),(n=this.labelSelection)==null||n.attr("transform",r=>Nt({d:r,rk:e,tx:10,ty:4}))}drawInteraction(){var e;(e=this.labelSelection)==null||e.classed(T.hiddenLabel,n=>!vr(n)),$t(this.parentNode)?(this.showLayout(),super.drawInteraction(),this.rootGroupSelection.selectChildren().sort(Ye)):this.hideLayout()}drawUpdateLabel(){var e;(e=this.labelSelection)==null||e.text(Ln)}};_(oe,"radius",e=>4);let re=oe;const Ln=t=>` ${t.data.name||t.data.id}`,ae=class ae extends Ue{constructor(e){super(e),this.initialize(!0),this.initializeChildGraphs(re)}initializeForces(){this.nodes.forEach(s=>s.r=s.type==="keyNode"?ae.radius(s):1.5);const e=Xe().strength(s=>s.type==="keyNode"?(s.graphLinks.length||1)*-2-1:0),n=Be(this.links).strength(s=>s.source.graphLinks.length/100).distance(this.keyNodes.length<2?()=>this.rootNode.r:s=>this.rootNode.r/this.links.length+(s.source.r||1)),r=dr(s=>s.type==="keyNode"?s.parent.r-s.r-2:0),i=rr().strength(.5).radius(s=>s.type==="keyNode"?s.r+2:0),o=()=>pr(this.rootNode),a=!0;this.simulationForces=[{name:"positionParentLinkNodes",force:o},{name:"link",force:n,optional:a},{name:"charge",force:e,optional:a},{name:"x",force:qe(0).strength(.05),optional:a},{name:"y",force:Ve(0).strength(.05),optional:a},{name:"collide",force:i},{name:"clamp",force:r}],super.initializeForces()}initializeSelection(){this.rootGroupSelection=this.rootSelection.data([this.rootNode]).append("g").classed(T.groupGraph,!0).attr("transform-origin","center"),this.linkSelection=this.rootGroupSelection.selectAll("line").data(this.links).join("line").classed(T.siblingLink,e=>e.type==="siblingLink").classed(T.parentLink,e=>e.type==="parentLink"),this.childGraphRootSelection=this.rootGroupSelection.selectAll("g").data(this.nodes).join("g").call(this.graphHandler.initializeDrag(this)),this.nodeSelection=this.childGraphRootSelection.append("g").append("circle").attr("r",e=>e.r||0).style("pointer-events","none").classed(T.parentLinkNode,e=>e.type==="parentLinkNode").classed(T.keyNode,e=>e.type==="keyNode").classed(T.groupNode,!0),super.initializeSelection()}drawLayout(){const{rk:e=1}=this.graphHandler.zoomTransform;this.linkSelection.each(n=>{var r,i,o,a,s;n.shortLink=ml(G((r=n.target)==null?void 0:r.x),G((i=n.target)==null?void 0:i.y),G((o=n.source)==null?void 0:o.x),G((a=n.source)==null?void 0:a.y),(s=n==null?void 0:n.source)==null?void 0:s.r)}).attr("x1",n=>n.shortLink.source.x*e).attr("y1",n=>n.shortLink.source.y*e).attr("x2",n=>n.shortLink.target.x*e).attr("y2",n=>n.shortLink.target.y*e),this.childGraphRootSelection.attr("transform",n=>Nt({d:n,rk:e})),this.nodeSelection.attr("r",n=>G(n.r)*(n.descendants?e:1))}drawInteraction(){$t(this.rootNode)?(this.showLayout(),super.drawInteraction(),this.rootGroupSelection.selectChildren().sort(Ye)):this.hideLayout()}};_(ae,"radius",e=>{var i;const n=((i=e.children)==null?void 0:i.filter(o=>o.type==="keyNode"))||[];let r=0;for(let o=0;o<n.length;o++){const a=n[o];r+=mr(re.radius(a)+3)}return yr(r)});let ie=ae;const ft=class ft extends Ue{constructor(n){super(n);_(this,"countLabelSelection");_(this,"graphSelection");_(this,"positionSelection");_(this,"serverSelection");_(this,"hostSelection");this.initialize(),this.initializeChildGraphs(ie)}initializeForces(){this.nodes.forEach(a=>a.r=a.data.isServer?10:ft.radius(a));const n=Xe().strength(a=>-300*a.children.filter(s=>s.type==="parentLinkNode").length),r=Be(this.links),i=rr().strength(.1).radius(a=>ft.radius(a)+4),o=!0;this.simulationForces=[{name:"link",force:r,optional:o},{name:"charge",force:n,optional:o},{name:"x",force:qe(0),optional:o},{name:"y",force:Ve(0),optional:o},{name:"collide",force:i}],super.initializeForces()}initializeSelection(){this.rootGroupSelection=this.rootSelection.data([this.rootNode]).append("g").attr("id",mt).classed(T.superGraph,!0).attr("transform-origin","center"),this.graphSelection=this.rootGroupSelection.append("g"),this.linkSelection=this.graphSelection.selectAll("line").data(this.links).join("line").attr("id",mt).classed(T.parentLink,!0).classed(T.siblingLink,n=>n.type==="siblingLink"),this.positionSelection=this.graphSelection.selectAll("g").data(this.nodes).join("g").call(this.graphHandler.initializeDrag(this)),this.hostSelection=this.positionSelection.filter(n=>!n.data.isServer).append("g").append("circle").attr("r",n=>n.r||0).classed(T.computerNode,!0),this.serverSelection=this.positionSelection.filter(n=>n.data.isServer).append("g").append("polygon").attr("points",n=>xr(6,n.r||0)).classed(T.serverNode,!0),this.nodeSelection=this.positionSelection.selectChild().selectChild(),this.nodeSelection.attr("cy-test","graphNode").attr("id",mt).each(it).classed(T.parentLinkNode,n=>n.type==="parentLinkNode").classed(T.keyNode,n=>n.type==="keyNode").classed(T.superNode,!0).on("click",this.graphHandler.clickNode.bind(this.graphHandler)).on("mouseover",this.graphHandler.mouseOverNode.bind(this.graphHandler)),this.childGraphRootSelection=this.positionSelection.append("g").filter(n=>!n.data.isServer),this.labelSelection=this.rootGroupSelection.append("g").selectAll("text").data(this.nodes).join("text").attr("text-anchor","end").attr("cy-test","selectedLabel").attr("id",wr).each(it).classed(T.superNodeNameLabel,!0).classed(T.hiddenLabel,!0).text(Mn),this.countLabelSelection=this.rootGroupSelection.append("g").selectAll("text").data(this.nodes.filter(n=>n.leaves().filter(r=>r.type==="keyNode").length>1)).join("text").attr("text-anchor","middle").each(it).classed(T.superNodeCountLabel,!0).text(n=>n.leaves().filter(r=>r.type==="keyNode").length),super.initializeSelection()}drawUpdateNodeVisual(){var n;this.nodeSelection.each(it),(n=this.labelSelection)==null||n.each(it),this.countLabelSelection.each(it)}drawTime(){super.drawTime([this.countLabelSelection])}drawLayout(){var o;const{k:n,x:r,y:i}=this.graphHandler.zoomTransform;this.linkSelection.attr("x1",a=>G(a.source.x)*n+r).attr("y1",a=>G(a.source.y)*n+i).attr("x2",a=>G(a.target.x)*n+r).attr("y2",a=>G(a.target.y)*n+i),this.positionSelection.attr("transform",a=>Nt({d:a,zk:n,zx:r,zy:i})),(o=this.countLabelSelection)==null||o.attr("transform",a=>Nt({d:a,zk:n,zx:r,zy:i,ty:4})),this.drawDynamicLayout(),super.drawLayout()}drawDynamicLayout(){var a;const{k:n,x:r,y:i,rk:o}=this.graphHandler.zoomTransform;this.hostSelection.attr("r",s=>ft.shrinkRadius(s,o)),(a=this.labelSelection)==null||a.attr("transform",s=>{const l=(s.data.isServer?G(s.r):ft.shrinkRadius(s,o))*-1-4;return Nt({d:s,zk:n,zx:r,zy:i,ty:4,tx:l})})}drawInteraction(){var n,r;this.drawDynamicLayout(),(n=this.countLabelSelection)==null||n.classed(T.hiddenLabel,i=>$t(i)),(r=this.labelSelection)==null||r.classed(T.hiddenLabel,i=>!vr(i)),super.drawInteraction(),this.graphSelection.selectChildren().sort(Ye)}drawUpdateLabel(){var n;(n=this.labelSelection)==null||n.text(Mn)}};_(ft,"radius",n=>{var o;const r=((o=n.children)==null?void 0:o.filter(a=>a.type==="keyNode"))||[];let i=0;for(let a=0;a<r.length;a++){const s=r[a];i+=mr(ie.radius(s)+10)}return yr(i)}),_(ft,"shrinkRadius",(n,r=1)=>{const i=G(n.r)*r;return $t(n)?i:Math.max(i*.6,8)});let Ae=ft;const Mn=t=>`${t.data.name||t.data.id} `;function Ll({selection:t,prioritySort:e,className:n="occluded"}){const r=[];t.selectAll("text").classed(n,!1).each((o,a,s)=>{const l=s[a],c=l.getBoundingClientRect();r.push({node:l,d:o,domRect:c})});const i=[];return e&&r.sort(e),r.forEach(o=>{const a=i.some(s=>Ml(o.domRect,s.domRect));et(o.node).classed(n,a),a||i.push(o)}),i}function Ml(t,e){return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)}const zl=(t,e)=>{var r,i,o,a;const n=["previewedFocus","previewed","previewedParent","selectedFocus","selected","selectedParent"];for(const s of n)if(t.d[s]!=e.d[s])return t.d[s]?-1:1;return t.d.depth!==e.d.depth?t.d.depth-e.d.depth:((r=t.d.children)==null?void 0:r.length)!==((i=e.d.children)==null?void 0:i.length)?(((o=t.d.children)==null?void 0:o.length)||0)-(((a=e.d.children)==null?void 0:a.length)||0):0},Tl="dotGrid",se=class se{constructor({onSelectionChange:e=J,onPreviewChange:n=J,onTimeChange:r=J,onDataChange:i=J,graphData:o,element:a,previouslyParsedGraphData:s}){_(this,"graphData");_(this,"svg");_(this,"rootSelection");_(this,"dimensions",{width:0,height:0});_(this,"graphRoot");_(this,"onSelectionChange",J);_(this,"onPreviewChange",J);_(this,"onTimeChange",J);_(this,"onDataChange",J);_(this,"_onSelectionChange",(...e)=>{this.graphRoot.callChildrenRecursively("drawInteraction"),this.drawTextOcclusion(),this.onSelectionChange(...e)});_(this,"_onPreviewChange",(...e)=>{this.graphRoot.callChildrenRecursively("drawInteraction"),this.drawTextOcclusion(),this.onPreviewChange(...e)});_(this,"_onTimeChange",()=>{this.graphRoot.callChildrenRecursively("drawTime"),this.drawTextOcclusion(),this.onTimeChange()});_(this,"_onDataChange",()=>{this.updateGraphRoot(),this.onDataChange()});_(this,"zoom");_(this,"dragState",{});_(this,"forceMode","graph");this.onSelectionChange=e,this.onPreviewChange=n,this.onTimeChange=r,this.onDataChange=i,this.graphData=new dl({graphData:o,onSelectionChange:this._onSelectionChange,onPreviewChange:this._onPreviewChange,onTimeChange:this._onTimeChange,onDataChange:this._onDataChange,previouslyParsedGraphData:s}),this.svg=et(a).html("").classed([T.graphRoot,Tl].join(" "),!0),this.resize(),this.svg.append("rect").on("mouseover",this.mouseOutNode.bind(this)).attr("width","100%").attr("height","100%").attr("x","-50%").attr("y","-50%").attr("fill","transparent"),this.rootSelection=this.svg.append("g"),this.initializeZoom(),this.updateGraphRoot(),cl(this),this.zoomToFit({duration:0})}updateGraphRoot(){this.graphRoot!=null&&this.rootSelection.selectChildren().remove(),this.graphRoot=new Ae({rootNode:this.graphData.rootNode,rootSelection:this.rootSelection,graphHandler:this})}drawTextOcclusion(){Ll({selection:this.rootSelection,className:T.occludedLabel,prioritySort:zl})}initializeZoom(){const e=()=>{this.graphRoot.freeze(),this.graphRoot.callChildrenRecursively("drawLayout")},n=()=>{this.svg.classed(T.isZooming,!0)},r=()=>{this.svg.classed(T.isZooming,!1),this.drawTextOcclusion()};this.zoom=tl().extent([[0,0],[this.dimensions.width,this.dimensions.height]]).scaleExtent([1/2,10]).on("start",n).on("zoom",e).on("end",r),this.svg.call(this.zoom)}get zoomTransform(){const e=ar(this.svg.node());return e.rk=se.scaleRadius(e.k),e}zoomToFit({duration:e=750,boundingBox:n}={}){const{k:r,x:i,y:o}=this.zoomTransform,{height:a,width:s}=this.dimensions,l=n||this.rootSelection.node().getBBox(),{height:c,width:u}=l,g=l.x+u/2,h=l.y+c/2,f=Math.max(u/s,c/a),x=Math.min(r/f-.2,4),v=(i-g)/r,d=(o-h)/r;this.svg.transition().duration(e).call(this.zoom.transform,he.scale(x).translate(v,d))}zoomToSelection(){throw new Error("Not Implemented")}zoomIn(){this.svg.transition().call(this.zoom.scaleBy,1.3,[0,0])}zoomOut(){this.svg.transition().call(this.zoom.scaleBy,.7,[0,0])}initializeDrag(e){const n=o=>{o.active||(o.subject.fx=this.dragState.startX=o.subject.x,o.subject.fy=this.dragState.startY=o.subject.y)},r=o=>{this.dragState.isDragging||(this.dragState.isDragging=!0);const{k:a}=this.zoomTransform,{x:s,y:l}=o,{startX:c=0,startY:u=0}=this.dragState,g=s-c,h=l-u,f=g/a+c,x=h/a+u,{x:v,y:d}=fr([f,x],o.subject.parent.r-o.subject.r);o.subject.fx=v,o.subject.fy=d,e.reheat(Math.max(Math.abs(s),Math.abs(l))*1e-4)},i=o=>{o.active||(e.cool(),o.subject.fx=null,o.subject.fy=null,this.dragState={})};return ho().on("start",n).on("drag",r).on("end",i)}clickNode(e,n){n.selectedFocus?this.graphData.clearSelection():this.graphData.selectNodes([n])}mouseOverNode(e,n){this.dragState.isDragging||this.graphData.previewNode(n)}mouseOutNode(){this.dragState.isDragging||this.graphData.clearPreview()}resize(){const e=this.svg.node();this.dimensions={width:e.clientWidth,height:e.clientHeight};const{width:n,height:r}=this.dimensions;this.svg.attr("viewBox",[-n/2,-r/2,n,r].join(" "))}updateNodeName(e,n){const r=this.graphData.allNodes.get(e);r&&(r.data.name=n,this.graphRoot.callChildrenRecursively("drawUpdateLabel"))}updateNodeVisual({nodeId:e,className:n,shape:r}){const i=this.graphData.allNodes.get(e);i&&(n!=null&&(i.data.removeClassName=i.data.className,i.data.className=n),r&&(i.data.shape=r),this.graphRoot.callChildrenRecursively("drawUpdateNodeVisual"))}useForceMode(e){e==="simple"?(this.graphRoot.callChildrenRecursively("useSimpleForces"),this.forceMode="simple"):(this.graphRoot.callChildrenRecursively("useGraphForces"),this.forceMode="graph")}toggleForceMode(){this.useForceMode(this.forceMode==="simple"?"graph":"simple")}};_(se,"scaleRadius",e=>Math.min(e,(e-1)*.3+1));let Ee=se;const Cl=async()=>{const t={randomData:cr(50,5)};try{t.realData=await Me("./public-test-data/reviewed-annotated-all.json")}catch{}try{t.testData=await Me("./public-test-data/miserables.json")}catch{}return t},Al=async()=>{try{return await Me("./public-test-data/parsedGraphData.json")}catch{return}},El=async t=>{const e=await Cl(),n=await Al(),r=document.getElementById(t);window.graph=new Ee({graphData:e.realData||e.randomData,element:r,previouslyParsedGraphData:n,onSelectionChange:o=>console.log(o)}),window.addEventListener("resize",()=>window.graph.resize());const i={zoomIn:()=>window.graph.zoomIn(),zoomOut:()=>window.graph.zoomOut(),zoomToFit:()=>window.graph.zoomToFit(),zoomToSelection:()=>window.graph.zoomToSelection(),toggleForceMode:o=>{window.graph.toggleForceMode(),zn(o.target)},showMoreLabels:o=>{r.classList.toggle("showMoreLabels"),zn(o.target)},randomData:()=>{window.graph.graphData.updateGraphData(cr(50,5),{mergeWithCurrentGraphData:!1}),window.graph.zoomToFit()},realData:()=>{e.realData&&(window.graph.graphData.updateGraphData(e.realData,{mergeWithCurrentGraphData:!1}),window.graph.zoomToFit())},testData:()=>{e.testData&&(window.graph.graphData.updateGraphData(e.testData,{mergeWithCurrentGraphData:!1}),window.graph.zoomToFit())}};window.controls=i,console.log(window.graph)},zn=t=>{const e=t.closest("button");e?["bp5-intent-primary","bp5-active","bp5-minimal"].forEach(n=>{e.classList.toggle(n)}):console.warn("No Button Element")};El("app");
