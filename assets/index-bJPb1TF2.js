var _r=Object.defineProperty;var Nr=(t,e,n)=>e in t?_r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _=(t,e,n)=>(Nr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function zn(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}var Sr={value:()=>{}};function Gt(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(t){this._=t}function br(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=Gt.prototype={constructor:Ut,on:function(t,e){var n=this._,r=br(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=kr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Ue(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ue(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ut(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function kr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ue(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Sr,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var we="http://www.w3.org/1999/xhtml";const We={svg:"http://www.w3.org/2000/svg",xhtml:we,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ce(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),We.hasOwnProperty(e)?{space:We[e],local:t}:t}function Lr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===we&&e.documentElement.namespaceURI===we?e.createElement(t):e.createElementNS(n,t)}}function Mr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cn(t){var e=ce(t);return(e.local?Mr:Lr)(e)}function zr(){}function Ee(t){return t==null?zr:function(){return this.querySelector(t)}}function Cr(t){typeof t!="function"&&(t=Ee(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Z(r,this._parents)}function Tr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ar(){return[]}function Tn(t){return t==null?Ar:function(){return this.querySelectorAll(t)}}function Er(t){return function(){return Tr(t.apply(this,arguments))}}function Pr(t){typeof t=="function"?t=Er(t):t=Tn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(t.call(c,c.__data__,l,a)),i.push(c));return new Z(r,i)}function An(t){return function(){return this.matches(t)}}function En(t){return function(e){return e.matches(t)}}var Dr=Array.prototype.find;function Ir(t){return function(){return Dr.call(this.children,t)}}function $r(){return this.firstElementChild}function Rr(t){return this.select(t==null?$r:Ir(typeof t=="function"?t:En(t)))}var Fr=Array.prototype.filter;function Gr(){return Array.from(this.children)}function Hr(t){return function(){return Fr.call(this.children,t)}}function Or(t){return this.selectAll(t==null?Gr:Hr(typeof t=="function"?t:En(t)))}function Br(t){typeof t!="function"&&(t=An(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new Z(r,this._parents)}function Pn(t){return new Array(t.length)}function Xr(){return new Z(this._enter||this._groups.map(Pn),this._parents)}function Zt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zt.prototype={constructor:Zt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qr(t){return function(){return t}}function Yr(t,e,n,r,i,o){for(var a=0,s,c=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Zt(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function Vr(t,e,n,r,i,o,a){var s,c,l=new Map,u=e.length,g=o.length,h=new Array(u),f;for(s=0;s<u;++s)(c=e[s])&&(h[s]=f=a.call(c,c.__data__,s,e)+"",l.has(f)?i[s]=c:l.set(f,c));for(s=0;s<g;++s)f=a.call(t,o[s],s,o)+"",(c=l.get(f))?(r[s]=c,c.__data__=o[s],l.delete(f)):n[s]=new Zt(t,o[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(h[s])===c&&(i[s]=c)}function Ur(t){return t.__data__}function Wr(t,e){if(!arguments.length)return Array.from(this,Ur);var n=e?Vr:Yr,r=this._parents,i=this._groups;typeof t!="function"&&(t=qr(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],g=i[l],h=g.length,f=jr(t.call(u,u&&u.__data__,l,r)),x=f.length,v=s[l]=new Array(x),d=a[l]=new Array(x),p=c[l]=new Array(h);n(u,g,v,d,p,f,e);for(var w=0,b=0,m,S;w<x;++w)if(m=v[w]){for(w>=b&&(b=w+1);!(S=d[b])&&++b<x;);m._next=S||null}}return a=new Z(a,r),a._enter=s,a._exit=c,a}function jr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Kr(){return new Z(this._exit||this._groups.map(Pn),this._parents)}function Zr(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Qr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],g=l.length,h=s[c]=new Array(g),f,x=0;x<g;++x)(f=l[x]||u[x])&&(h[x]=f);for(;c<i;++c)s[c]=n[c];return new Z(s,this._parents)}function Jr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ti(t){t||(t=ei);function e(g,h){return g&&h?t(g.__data__,h.__data__):!g-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(e)}return new Z(i,this._parents).order()}function ei(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ni(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ri(){return Array.from(this)}function ii(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function oi(){let t=0;for(const e of this)++t;return t}function ai(){return!this.node()}function si(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function ci(t){return function(){this.removeAttribute(t)}}function li(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ui(t,e){return function(){this.setAttribute(t,e)}}function hi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function di(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pi(t,e){var n=ce(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?li:ci:typeof e=="function"?n.local?di:fi:n.local?hi:ui)(n,e))}function Dn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gi(t){return function(){this.style.removeProperty(t)}}function mi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function yi(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vi(t,e,n){return arguments.length>1?this.each((e==null?gi:typeof e=="function"?yi:mi)(t,e,n??"")):St(this.node(),t)}function St(t,e){return t.style.getPropertyValue(e)||Dn(t).getComputedStyle(t,null).getPropertyValue(e)}function wi(t){return function(){delete this[t]}}function xi(t,e){return function(){this[t]=e}}function _i(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ni(t,e){return arguments.length>1?this.each((e==null?wi:typeof e=="function"?_i:xi)(t,e)):this.node()[t]}function In(t){return t.trim().split(/^|\s+/)}function Pe(t){return t.classList||new $n(t)}function $n(t){this._node=t,this._names=In(t.getAttribute("class")||"")}$n.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Rn(t,e){for(var n=Pe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Fn(t,e){for(var n=Pe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Si(t){return function(){Rn(this,t)}}function bi(t){return function(){Fn(this,t)}}function ki(t,e){return function(){(e.apply(this,arguments)?Rn:Fn)(this,t)}}function Li(t,e){var n=In(t+"");if(arguments.length<2){for(var r=Pe(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ki:e?Si:bi)(n,e))}function Mi(){this.textContent=""}function zi(t){return function(){this.textContent=t}}function Ci(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ti(t){return arguments.length?this.each(t==null?Mi:(typeof t=="function"?Ci:zi)(t)):this.node().textContent}function Ai(){this.innerHTML=""}function Ei(t){return function(){this.innerHTML=t}}function Pi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Di(t){return arguments.length?this.each(t==null?Ai:(typeof t=="function"?Pi:Ei)(t)):this.node().innerHTML}function Ii(){this.nextSibling&&this.parentNode.appendChild(this)}function $i(){return this.each(Ii)}function Ri(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fi(){return this.each(Ri)}function Gi(t){var e=typeof t=="function"?t:Cn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Hi(){return null}function Oi(t,e){var n=typeof t=="function"?t:Cn(t),r=e==null?Hi:typeof e=="function"?e:Ee(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bi(){var t=this.parentNode;t&&t.removeChild(this)}function Xi(){return this.each(Bi)}function qi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vi(t){return this.select(t?Yi:qi)}function Ui(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wi(t){return function(e){t.call(this,e,this.__data__)}}function ji(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ki(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Zi(t,e,n){return function(){var r=this.__on,i,o=Wi(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Qi(t,e,n){var r=ji(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?Zi:Ki,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Gn(t,e,n){var r=Dn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ji(t,e){return function(){return Gn(this,t,e)}}function to(t,e){return function(){return Gn(this,t,e.apply(this,arguments))}}function eo(t,e){return this.each((typeof e=="function"?to:Ji)(t,e))}function*no(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Hn=[null];function Z(t,e){this._groups=t,this._parents=e}function Ht(){return new Z([[document.documentElement]],Hn)}function ro(){return this}Z.prototype=Ht.prototype={constructor:Z,select:Cr,selectAll:Pr,selectChild:Rr,selectChildren:Or,filter:Br,data:Wr,enter:Xr,exit:Kr,join:Zr,merge:Qr,selection:ro,order:Jr,sort:ti,call:ni,nodes:ri,node:ii,size:oi,empty:ai,each:si,attr:pi,style:vi,property:Ni,classed:Li,text:Ti,html:Di,raise:$i,lower:Fi,append:Gi,insert:Oi,remove:Xi,clone:Vi,datum:Ui,on:Qi,dispatch:eo,[Symbol.iterator]:no};function et(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],Hn)}function io(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ct(t,e){if(t=io(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const oo={passive:!1},Et={capture:!0,passive:!1};function fe(t){t.stopImmediatePropagation()}function wt(t){t.preventDefault(),t.stopImmediatePropagation()}function On(t){var e=t.document.documentElement,n=et(t).on("dragstart.drag",wt,Et);"onselectstart"in e?n.on("selectstart.drag",wt,Et):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Bn(t,e){var n=t.document.documentElement,r=et(t).on("dragstart.drag",null);e&&(r.on("click.drag",wt,Et),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Bt=t=>()=>t;function xe(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}xe.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ao(t){return!t.ctrlKey&&!t.button}function so(){return this.parentNode}function co(t,e){return e??{x:t.x,y:t.y}}function lo(){return navigator.maxTouchPoints||"ontouchstart"in this}function uo(){var t=ao,e=so,n=co,r=lo,i={},o=Gt("start","drag","end"),a=0,s,c,l,u,g=0;function h(m){m.on("mousedown.drag",f).filter(r).on("touchstart.drag",d).on("touchmove.drag",p,oo).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(m,S){if(!(u||!t.call(this,m,S))){var M=b(this,e.call(this,m,S),m,S,"mouse");M&&(et(m.view).on("mousemove.drag",x,Et).on("mouseup.drag",v,Et),On(m.view),fe(m),l=!1,s=m.clientX,c=m.clientY,M("start",m))}}function x(m){if(wt(m),!l){var S=m.clientX-s,M=m.clientY-c;l=S*S+M*M>g}i.mouse("drag",m)}function v(m){et(m.view).on("mousemove.drag mouseup.drag",null),Bn(m.view,l),wt(m),i.mouse("end",m)}function d(m,S){if(t.call(this,m,S)){var M=m.changedTouches,T=e.call(this,m,S),P=M.length,$,D;for($=0;$<P;++$)(D=b(this,T,m,S,M[$].identifier,M[$]))&&(fe(m),D("start",m,M[$]))}}function p(m){var S=m.changedTouches,M=S.length,T,P;for(T=0;T<M;++T)(P=i[S[T].identifier])&&(wt(m),P("drag",m,S[T]))}function w(m){var S=m.changedTouches,M=S.length,T,P;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),T=0;T<M;++T)(P=i[S[T].identifier])&&(fe(m),P("end",m,S[T]))}function b(m,S,M,T,P,$){var D=o.copy(),R=ct($||M,S),B,O,y;if((y=n.call(m,new xe("beforestart",{sourceEvent:M,target:h,identifier:P,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:D}),T))!=null)return B=y.x-R[0]||0,O=y.y-R[1]||0,function k(N,L,z){var A=R,E;switch(N){case"start":i[P]=k,E=a++;break;case"end":delete i[P],--a;case"drag":R=ct(z||L,S),E=a;break}D.call(N,m,new xe(N,{sourceEvent:L,subject:y,target:h,identifier:P,active:E,x:R[0]+B,y:R[1]+O,dx:R[0]-A[0],dy:R[1]-A[1],dispatch:D}),T)}}return h.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Bt(!!m),h):t},h.container=function(m){return arguments.length?(e=typeof m=="function"?m:Bt(m),h):e},h.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Bt(m),h):n},h.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Bt(!!m),h):r},h.on=function(){var m=o.on.apply(o,arguments);return m===o?h:m},h.clickDistance=function(m){return arguments.length?(g=(m=+m)*m,h):Math.sqrt(g)},h}function De(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ot(){}var Pt=.7,Qt=1/Pt,xt="\\s*([+-]?\\d+)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ho=/^#([0-9a-f]{3,8})$/,fo=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),po=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),go=new RegExp(`^rgba\\(${xt},${xt},${xt},${Dt}\\)$`),mo=new RegExp(`^rgba\\(${ot},${ot},${ot},${Dt}\\)$`),yo=new RegExp(`^hsl\\(${Dt},${ot},${ot}\\)$`),vo=new RegExp(`^hsla\\(${Dt},${ot},${ot},${Dt}\\)$`),je={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};De(Ot,It,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ke,formatHex:Ke,formatHex8:wo,formatHsl:xo,formatRgb:Ze,toString:Ze});function Ke(){return this.rgb().formatHex()}function wo(){return this.rgb().formatHex8()}function xo(){return qn(this).formatHsl()}function Ze(){return this.rgb().formatRgb()}function It(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ho.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Qe(e):n===3?new j(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fo.exec(t))?new j(e[1],e[2],e[3],1):(e=po.exec(t))?new j(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=go.exec(t))?Xt(e[1],e[2],e[3],e[4]):(e=mo.exec(t))?Xt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yo.exec(t))?en(e[1],e[2]/100,e[3]/100,1):(e=vo.exec(t))?en(e[1],e[2]/100,e[3]/100,e[4]):je.hasOwnProperty(t)?Qe(je[t]):t==="transparent"?new j(NaN,NaN,NaN,0):null}function Qe(t){return new j(t>>16&255,t>>8&255,t&255,1)}function Xt(t,e,n,r){return r<=0&&(t=e=n=NaN),new j(t,e,n,r)}function _o(t){return t instanceof Ot||(t=It(t)),t?(t=t.rgb(),new j(t.r,t.g,t.b,t.opacity)):new j}function _e(t,e,n,r){return arguments.length===1?_o(t):new j(t,e,n,r??1)}function j(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}De(j,_e,Xn(Ot,{brighter(t){return t=t==null?Qt:Math.pow(Qt,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pt:Math.pow(Pt,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new j(gt(this.r),gt(this.g),gt(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Je,formatHex:Je,formatHex8:No,formatRgb:tn,toString:tn}));function Je(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function No(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function tn(){const t=Jt(this.opacity);return`${t===1?"rgb(":"rgba("}${gt(this.r)}, ${gt(this.g)}, ${gt(this.b)}${t===1?")":`, ${t})`}`}function Jt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pt(t){return t=gt(t),(t<16?"0":"")+t.toString(16)}function en(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nt(t,e,n,r)}function qn(t){if(t instanceof nt)return new nt(t.h,t.s,t.l,t.opacity);if(t instanceof Ot||(t=It(t)),!t)return new nt;if(t instanceof nt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new nt(a,s,c,t.opacity)}function So(t,e,n,r){return arguments.length===1?qn(t):new nt(t,e,n,r??1)}function nt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}De(nt,So,Xn(Ot,{brighter(t){return t=t==null?Qt:Math.pow(Qt,t),new nt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pt:Math.pow(Pt,t),new nt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new j(de(t>=240?t-240:t+120,i,r),de(t,i,r),de(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new nt(nn(this.h),qt(this.s),qt(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jt(this.opacity);return`${t===1?"hsl(":"hsla("}${nn(this.h)}, ${qt(this.s)*100}%, ${qt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nn(t){return t=(t||0)%360,t<0?t+360:t}function qt(t){return Math.max(0,Math.min(1,t||0))}function de(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Yn=t=>()=>t;function bo(t,e){return function(n){return t+n*e}}function ko(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Lo(t){return(t=+t)==1?Vn:function(e,n){return n-e?ko(e,n,t):Yn(isNaN(e)?n:e)}}function Vn(t,e){var n=e-t;return n?bo(t,n):Yn(isNaN(t)?e:t)}const rn=function t(e){var n=Lo(e);function r(i,o){var a=n((i=_e(i)).r,(o=_e(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=Vn(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(Ne.source,"g");function Mo(t){return function(){return t}}function zo(t){return function(e){return t(e)+""}}function Co(t,e){var n=Ne.lastIndex=pe.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Ne.exec(t))&&(i=pe.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:ht(r,i)})),n=pe.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?zo(c[0].x):Mo(e):(e=c.length,function(l){for(var u=0,g;u<e;++u)s[(g=c[u]).i]=g.x(l);return s.join("")})}var on=180/Math.PI,Se={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Un(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*on,skewX:Math.atan(c)*on,scaleX:a,scaleY:s}}var Yt;function To(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Se:Un(e.a,e.b,e.c,e.d,e.e,e.f)}function Ao(t){return t==null||(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",t),!(t=Yt.transform.baseVal.consolidate()))?Se:(t=t.matrix,Un(t.a,t.b,t.c,t.d,t.e,t.f))}function Wn(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,g,h,f,x){if(l!==g||u!==h){var v=f.push("translate(",null,e,null,n);x.push({i:v-4,x:ht(l,g)},{i:v-2,x:ht(u,h)})}else(g||h)&&f.push("translate("+g+e+h+n)}function a(l,u,g,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:g.push(i(g)+"rotate(",null,r)-2,x:ht(l,u)})):u&&g.push(i(g)+"rotate("+u+r)}function s(l,u,g,h){l!==u?h.push({i:g.push(i(g)+"skewX(",null,r)-2,x:ht(l,u)}):u&&g.push(i(g)+"skewX("+u+r)}function c(l,u,g,h,f,x){if(l!==g||u!==h){var v=f.push(i(f)+"scale(",null,",",null,")");x.push({i:v-4,x:ht(l,g)},{i:v-2,x:ht(u,h)})}else(g!==1||h!==1)&&f.push(i(f)+"scale("+g+","+h+")")}return function(l,u){var g=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,g,h),a(l.rotate,u.rotate,g,h),s(l.skewX,u.skewX,g,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,g,h),l=u=null,function(f){for(var x=-1,v=h.length,d;++x<v;)g[(d=h[x]).i]=d.x(f);return g.join("")}}}var Eo=Wn(To,"px, ","px)","deg)"),Po=Wn(Ao,", ",")",")"),Do=1e-12;function an(t){return((t=Math.exp(t))+1/t)/2}function Io(t){return((t=Math.exp(t))-1/t)/2}function $o(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ro=function t(e,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],g=a[1],h=a[2],f=u-s,x=g-c,v=f*f+x*x,d,p;if(v<Do)p=Math.log(h/l)/e,d=function(T){return[s+T*f,c+T*x,l*Math.exp(e*T*p)]};else{var w=Math.sqrt(v),b=(h*h-l*l+r*v)/(2*l*n*w),m=(h*h-l*l-r*v)/(2*h*n*w),S=Math.log(Math.sqrt(b*b+1)-b),M=Math.log(Math.sqrt(m*m+1)-m);p=(M-S)/e,d=function(T){var P=T*p,$=an(S),D=l/(n*w)*($*$o(e*P+S)-Io(S));return[s+D*f,c+D*x,l*$/an(e*P+S)]}}return d.duration=p*1e3*e/Math.SQRT2,d}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},i}(Math.SQRT2,2,4);var bt=0,zt=0,Lt=0,jn=1e3,te,Ct,ee=0,yt=0,le=0,$t=typeof performance=="object"&&performance.now?performance:Date,Kn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ie(){return yt||(Kn(Fo),yt=$t.now()+le)}function Fo(){yt=0}function ne(){this._call=this._time=this._next=null}ne.prototype=$e.prototype={constructor:ne,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ie():+n)+(e==null?0:+e),!this._next&&Ct!==this&&(Ct?Ct._next=this:te=this,Ct=this),this._call=t,this._time=n,be()},stop:function(){this._call&&(this._call=null,this._time=1/0,be())}};function $e(t,e,n){var r=new ne;return r.restart(t,e,n),r}function Go(){Ie(),++bt;for(var t=te,e;t;)(e=yt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--bt}function sn(){yt=(ee=$t.now())+le,bt=zt=0;try{Go()}finally{bt=0,Oo(),yt=0}}function Ho(){var t=$t.now(),e=t-ee;e>jn&&(le-=e,ee=t)}function Oo(){for(var t,e=te,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:te=n);Ct=t,be(r)}function be(t){if(!bt){zt&&(zt=clearTimeout(zt));var e=t-yt;e>24?(t<1/0&&(zt=setTimeout(sn,t-$t.now()-le)),Lt&&(Lt=clearInterval(Lt))):(Lt||(ee=$t.now(),Lt=setInterval(Ho,jn)),bt=1,Kn(sn))}}function cn(t,e,n){var r=new ne;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Bo=Gt("start","end","cancel","interrupt"),Xo=[],Zn=0,ln=1,ke=2,Wt=3,un=4,Le=5,jt=6;function ue(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;qo(t,n,{name:e,index:r,group:i,on:Bo,tween:Xo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Zn})}function Re(t,e){var n=rt(t,e);if(n.state>Zn)throw new Error("too late; already scheduled");return n}function at(t,e){var n=rt(t,e);if(n.state>Wt)throw new Error("too late; already running");return n}function rt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function qo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=$e(o,0,n.time);function o(l){n.state=ln,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,g,h,f;if(n.state!==ln)return c();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Wt)return cn(a);f.state===un?(f.state=jt,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=jt,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(cn(function(){n.state===Wt&&(n.state=un,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=ke,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ke){for(n.state=Wt,i=new Array(h=n.tween.length),u=0,g=-1;u<h;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++g]=f);i.length=g+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Le,1),g=-1,h=i.length;++g<h;)i[g].call(t,u);n.state===Le&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=jt,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Kt(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>ke&&r.state<Le,r.state=jt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Yo(t){return this.each(function(){Kt(this,t)})}function Vo(t,e){var n,r;return function(){var i=at(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Uo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=at(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function Wo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=rt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Vo:Uo)(n,t,e))}function Fe(t,e,n){var r=t._id;return t.each(function(){var i=at(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return rt(i,r).value[e]}}function Qn(t,e){var n;return(typeof e=="number"?ht:e instanceof It?rn:(n=It(e))?(e=n,rn):Co)(t,e)}function jo(t){return function(){this.removeAttribute(t)}}function Ko(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Qo(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Jo(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function ta(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function ea(t,e){var n=ce(t),r=n==="transform"?Po:Qn;return this.attrTween(t,typeof e=="function"?(n.local?ta:Jo)(n,r,Fe(this,"attr."+t,e)):e==null?(n.local?Ko:jo)(n):(n.local?Qo:Zo)(n,r,e))}function na(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ra(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ia(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ra(t,o)),n}return i._value=e,i}function oa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&na(t,o)),n}return i._value=e,i}function aa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ce(t);return this.tween(n,(r.local?ia:oa)(r,e))}function sa(t,e){return function(){Re(this,t).delay=+e.apply(this,arguments)}}function ca(t,e){return e=+e,function(){Re(this,t).delay=e}}function la(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?sa:ca)(e,t)):rt(this.node(),e).delay}function ua(t,e){return function(){at(this,t).duration=+e.apply(this,arguments)}}function ha(t,e){return e=+e,function(){at(this,t).duration=e}}function fa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ua:ha)(e,t)):rt(this.node(),e).duration}function da(t,e){if(typeof e!="function")throw new Error;return function(){at(this,t).ease=e}}function pa(t){var e=this._id;return arguments.length?this.each(da(e,t)):rt(this.node(),e).ease}function ga(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,t).ease=n}}function ma(t){if(typeof t!="function")throw new Error;return this.each(ga(this._id,t))}function ya(t){typeof t!="function"&&(t=An(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new ut(r,this._parents,this._name,this._id)}function va(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],l=n[s],u=c.length,g=a[s]=new Array(u),h,f=0;f<u;++f)(h=c[f]||l[f])&&(g[f]=h);for(;s<r;++s)a[s]=e[s];return new ut(a,this._parents,this._name,this._id)}function wa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xa(t,e,n){var r,i,o=wa(e)?Re:at;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function _a(t,e){var n=this._id;return arguments.length<2?rt(this.node(),n).on.on(t):this.each(xa(n,t,e))}function Na(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Sa(){return this.on("end.remove",Na(this._id))}function ba(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ee(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,g,h=0;h<c;++h)(u=s[h])&&(g=t.call(u,u.__data__,h,s))&&("__data__"in u&&(g.__data__=u.__data__),l[h]=g,ue(l[h],e,n,h,l,rt(u,n)));return new ut(o,this._parents,e,n)}function ka(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Tn(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,g=0;g<l;++g)if(u=c[g]){for(var h=t.call(u,u.__data__,g,c),f,x=rt(u,n),v=0,d=h.length;v<d;++v)(f=h[v])&&ue(f,e,n,v,h,x);o.push(h),a.push(u)}return new ut(o,a,e,n)}var La=Ht.prototype.constructor;function Ma(){return new La(this._groups,this._parents)}function za(t,e){var n,r,i;return function(){var o=St(this,t),a=(this.style.removeProperty(t),St(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Jn(t){return function(){this.style.removeProperty(t)}}function Ca(t,e,n){var r,i=n+"",o;return function(){var a=St(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Ta(t,e,n){var r,i,o;return function(){var a=St(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),St(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function Aa(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=at(this,t),l=c.on,u=c.value[o]==null?s||(s=Jn(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function Ea(t,e,n){var r=(t+="")=="transform"?Eo:Qn;return e==null?this.styleTween(t,za(t,r)).on("end.style."+t,Jn(t)):typeof e=="function"?this.styleTween(t,Ta(t,r,Fe(this,"style."+t,e))).each(Aa(this._id,t)):this.styleTween(t,Ca(t,r,e),n).on("end.style."+t,null)}function Pa(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Da(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Pa(t,a,n)),r}return o._value=e,o}function Ia(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Da(t,e,n??""))}function $a(t){return function(){this.textContent=t}}function Ra(t){return function(){var e=t(this);this.textContent=e??""}}function Fa(t){return this.tween("text",typeof t=="function"?Ra(Fe(this,"text",t)):$a(t==null?"":t+""))}function Ga(t){return function(e){this.textContent=t.call(this,e)}}function Ha(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ga(i)),e}return r._value=t,r}function Oa(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ha(t))}function Ba(){for(var t=this._name,e=this._id,n=tr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=rt(c,e);ue(c,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ut(r,this._parents,t,n)}function Xa(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=at(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&o()})}var qa=0;function ut(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function tr(){return++qa}var st=Ht.prototype;ut.prototype={constructor:ut,select:ba,selectAll:ka,selectChild:st.selectChild,selectChildren:st.selectChildren,filter:ya,merge:va,selection:Ma,transition:Ba,call:st.call,nodes:st.nodes,node:st.node,size:st.size,empty:st.empty,each:st.each,on:_a,attr:ea,attrTween:aa,style:Ea,styleTween:Ia,text:Fa,textTween:Oa,remove:Sa,tween:Wo,delay:la,duration:fa,ease:pa,easeVarying:ma,end:Xa,[Symbol.iterator]:st[Symbol.iterator]};function Ya(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Va={time:null,delay:0,duration:250,ease:Ya};function Ua(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Wa(t){var e,n;t instanceof ut?(e=t._id,t=t._name):(e=tr(),(n=Va).time=Ie(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&ue(c,t,e,l,a,n||Ua(c,e));return new ut(r,this._parents,t,e)}Ht.prototype.interrupt=Yo;Ht.prototype.transition=Wa;function ja(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Ka(t,e){return fetch(t,e).then(ja)}function Za(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return er(this.cover(e,n),e,n,t)}function er(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,c=t._y0,l=t._x1,u=t._y1,g,h,f,x,v,d,p,w;if(!o)return t._root=a,t;for(;o.length;)if((v=e>=(g=(s+l)/2))?s=g:l=g,(d=n>=(h=(c+u)/2))?c=h:u=h,i=o,!(o=o[p=d<<1|v]))return i[p]=a,t;if(f=+t._x.call(null,o.data),x=+t._y.call(null,o.data),e===f&&n===x)return a.next=o,i?i[p]=a:t._root=a,t;do i=i?i[p]=new Array(4):t._root=new Array(4),(v=e>=(g=(s+l)/2))?s=g:l=g,(d=n>=(h=(c+u)/2))?c=h:u=h;while((p=d<<1|v)===(w=(x>=h)<<1|f>=g));return i[w]=o,i[p]=a,t}function Qa(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>g&&(g=o));if(c>u||l>g)return this;for(this.cover(c,l).cover(u,g),n=0;n<r;++n)er(this,a[n],s[n],t[n]);return this}function Ja(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,c,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function ts(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function es(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function q(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function ns(t,e,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,g=this._y1,h=[],f=this._root,x,v;for(f&&h.push(new q(f,i,o,u,g)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,g=e+n,n*=n);x=h.pop();)if(!(!(f=x.node)||(a=x.x0)>u||(s=x.y0)>g||(c=x.x1)<i||(l=x.y1)<o))if(f.length){var d=(a+c)/2,p=(s+l)/2;h.push(new q(f[3],d,p,c,l),new q(f[2],a,p,d,l),new q(f[1],d,s,c,p),new q(f[0],a,s,d,p)),(v=(e>=p)<<1|t>=d)&&(x=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=x)}else{var w=t-+this._x.call(null,f.data),b=e-+this._y.call(null,f.data),m=w*w+b*b;if(m<n){var S=Math.sqrt(n=m);i=t-S,o=e-S,u=t+S,g=e+S,r=f.data}}return r}function rs(t){if(isNaN(u=+this._x.call(null,t))||isNaN(g=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,g,h,f,x,v,d,p;if(!n)return this;if(n.length)for(;;){if((x=u>=(h=(a+c)/2))?a=h:c=h,(v=g>=(f=(s+l)/2))?s=f:l=f,e=n,!(n=n[d=v<<1|x]))return this;if(!n.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(r=e,p=d)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[d]=o:delete e[d],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[p]=n:this._root=n),this):(this._root=o,this)}function is(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function os(){return this._root}function as(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function ss(t){var e=[],n,r=this._root,i,o,a,s,c;for(r&&e.push(new q(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&e.push(new q(i,l,u,s,c)),(i=r[2])&&e.push(new q(i,o,u,l,c)),(i=r[1])&&e.push(new q(i,l,a,s,u)),(i=r[0])&&e.push(new q(i,o,a,l,u))}return this}function cs(t){var e=[],n=[],r;for(this._root&&e.push(new q(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,g=(s+l)/2;(o=i[0])&&e.push(new q(o,a,s,u,g)),(o=i[1])&&e.push(new q(o,u,s,c,g)),(o=i[2])&&e.push(new q(o,a,g,u,l)),(o=i[3])&&e.push(new q(o,u,g,c,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function ls(t){return t[0]}function us(t){return arguments.length?(this._x=t,this):this._x}function hs(t){return t[1]}function fs(t){return arguments.length?(this._y=t,this):this._y}function Ge(t,e,n){var r=new He(e??ls,n??hs,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function He(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function hn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var V=Ge.prototype=He.prototype;V.copy=function(){var t=new He(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=hn(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=hn(r));return t};V.add=Za;V.addAll=Qa;V.cover=Ja;V.data=ts;V.extent=es;V.find=ns;V.remove=rs;V.removeAll=is;V.root=os;V.size=as;V.visit=ss;V.visitAfter=cs;V.x=us;V.y=fs;function Y(t){return function(){return t}}function dt(t){return(t()-.5)*1e-6}function ds(t){return t.x+t.vx}function ps(t){return t.y+t.vy}function nr(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Y(t==null?1:+t));function a(){for(var l,u=e.length,g,h,f,x,v,d,p=0;p<o;++p)for(g=Ge(e,ds,ps).visitAfter(s),l=0;l<u;++l)h=e[l],v=n[h.index],d=v*v,f=h.x+h.vx,x=h.y+h.vy,g.visit(w);function w(b,m,S,M,T){var P=b.data,$=b.r,D=v+$;if(P){if(P.index>h.index){var R=f-P.x-P.vx,B=x-P.y-P.vy,O=R*R+B*B;O<D*D&&(R===0&&(R=dt(r),O+=R*R),B===0&&(B=dt(r),O+=B*B),O=(D-(O=Math.sqrt(O)))/O*i,h.vx+=(R*=O)*(D=($*=$)/(d+$)),h.vy+=(B*=O)*D,P.vx-=R*(D=1-D),P.vy-=B*D)}return}return m>f+D||M<f-D||S>x+D||T<x-D}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(e){var l,u=e.length,g;for(n=new Array(u),l=0;l<u;++l)g=e[l],n[g.index]=+t(g,l,e)}}return a.initialize=function(l,u){e=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Y(+l),c(),a):t},a}function gs(t){return t.index}function fn(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Oe(t){var e=gs,n=g,r,i=Y(30),o,a,s,c,l,u=1;t==null&&(t=[]);function g(d){return 1/Math.min(s[d.source.index],s[d.target.index])}function h(d){for(var p=0,w=t.length;p<u;++p)for(var b=0,m,S,M,T,P,$,D;b<w;++b)m=t[b],S=m.source,M=m.target,T=M.x+M.vx-S.x-S.vx||dt(l),P=M.y+M.vy-S.y-S.vy||dt(l),$=Math.sqrt(T*T+P*P),$=($-o[b])/$*d*r[b],T*=$,P*=$,M.vx-=T*(D=c[b]),M.vy-=P*D,S.vx+=T*(D=1-D),S.vy+=P*D}function f(){if(a){var d,p=a.length,w=t.length,b=new Map(a.map((S,M)=>[e(S,M,a),S])),m;for(d=0,s=new Array(p);d<w;++d)m=t[d],m.index=d,typeof m.source!="object"&&(m.source=fn(b,m.source)),typeof m.target!="object"&&(m.target=fn(b,m.target)),s[m.source.index]=(s[m.source.index]||0)+1,s[m.target.index]=(s[m.target.index]||0)+1;for(d=0,c=new Array(w);d<w;++d)m=t[d],c[d]=s[m.source.index]/(s[m.source.index]+s[m.target.index]);r=new Array(w),x(),o=new Array(w),v()}}function x(){if(a)for(var d=0,p=t.length;d<p;++d)r[d]=+n(t[d],d,t)}function v(){if(a)for(var d=0,p=t.length;d<p;++d)o[d]=+i(t[d],d,t)}return h.initialize=function(d,p){a=d,l=p,f()},h.links=function(d){return arguments.length?(t=d,f(),h):t},h.id=function(d){return arguments.length?(e=d,h):e},h.iterations=function(d){return arguments.length?(u=+d,h):u},h.strength=function(d){return arguments.length?(n=typeof d=="function"?d:Y(+d),x(),h):n},h.distance=function(d){return arguments.length?(i=typeof d=="function"?d:Y(+d),v(),h):i},h}const ms=1664525,ys=1013904223,dn=4294967296;function vs(){let t=1;return()=>(t=(ms*t+ys)%dn)/dn}function ws(t){return t.x}function xs(t){return t.y}var _s=10,Ns=Math.PI*(3-Math.sqrt(5));function Ss(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=$e(g),l=Gt("tick","end"),u=vs();t==null&&(t=[]);function g(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(v){var d,p=t.length,w;v===void 0&&(v=1);for(var b=0;b<v;++b)for(n+=(o-n)*i,s.forEach(function(m){m(n)}),d=0;d<p;++d)w=t[d],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return e}function f(){for(var v=0,d=t.length,p;v<d;++v){if(p=t[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var w=_s*Math.sqrt(.5+v),b=v*Ns;p.x=w*Math.cos(b),p.y=w*Math.sin(b)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function x(v){return v.initialize&&v.initialize(t,u),v}return f(),e={tick:h,restart:function(){return c.restart(g),e},stop:function(){return c.stop(),e},nodes:function(v){return arguments.length?(t=v,f(),s.forEach(x),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(a=1-v,e):1-a},randomSource:function(v){return arguments.length?(u=v,s.forEach(x),e):u},force:function(v,d){return arguments.length>1?(d==null?s.delete(v):s.set(v,x(d)),e):s.get(v)},find:function(v,d,p){var w=0,b=t.length,m,S,M,T,P;for(p==null?p=1/0:p*=p,w=0;w<b;++w)T=t[w],m=v-T.x,S=d-T.y,M=m*m+S*S,M<p&&(P=T,p=M);return P},on:function(v,d){return arguments.length>1?(l.on(v,d),e):l.on(v)}}}function Be(){var t,e,n,r,i=Y(-30),o,a=1,s=1/0,c=.81;function l(f){var x,v=t.length,d=Ge(t,ws,xs).visitAfter(g);for(r=f,x=0;x<v;++x)e=t[x],d.visit(h)}function u(){if(t){var f,x=t.length,v;for(o=new Array(x),f=0;f<x;++f)v=t[f],o[v.index]=+i(v,f,t)}}function g(f){var x=0,v,d,p=0,w,b,m;if(f.length){for(w=b=m=0;m<4;++m)(v=f[m])&&(d=Math.abs(v.value))&&(x+=v.value,p+=d,w+=d*v.x,b+=d*v.y);f.x=w/p,f.y=b/p}else{v=f,v.x=v.data.x,v.y=v.data.y;do x+=o[v.data.index];while(v=v.next)}f.value=x}function h(f,x,v,d){if(!f.value)return!0;var p=f.x-e.x,w=f.y-e.y,b=d-x,m=p*p+w*w;if(b*b/c<m)return m<s&&(p===0&&(p=dt(n),m+=p*p),w===0&&(w=dt(n),m+=w*w),m<a&&(m=Math.sqrt(a*m)),e.vx+=p*f.value*r/m,e.vy+=w*f.value*r/m),!0;if(f.length||m>=s)return;(f.data!==e||f.next)&&(p===0&&(p=dt(n),m+=p*p),w===0&&(w=dt(n),m+=w*w),m<a&&(m=Math.sqrt(a*m)));do f.data!==e&&(b=o[f.data.index]*r/m,e.vx+=p*b,e.vy+=w*b);while(f=f.next)}return l.initialize=function(f,x){t=f,n=x,u()},l.strength=function(f){return arguments.length?(i=typeof f=="function"?f:Y(+f),u(),l):i},l.distanceMin=function(f){return arguments.length?(a=f*f,l):Math.sqrt(a)},l.distanceMax=function(f){return arguments.length?(s=f*f,l):Math.sqrt(s)},l.theta=function(f){return arguments.length?(c=f*f,l):Math.sqrt(c)},l}function Xe(t){var e=Y(.1),n,r,i;typeof t!="function"&&(t=Y(t==null?0:+t));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Y(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:Y(+s),a(),o):t},o}function qe(t){var e=Y(.1),n,r,i;typeof t!="function"&&(t=Y(t==null?0:+t));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Y(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:Y(+s),a(),o):t},o}function bs(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function ks(){return this.eachAfter(bs)}function Ls(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Ms(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function zs(t,e){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++c,this);return this}function Cs(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Ts(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function As(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Es(t){for(var e=this,n=Ps(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Ps(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Ds(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Is(){return Array.from(this)}function $s(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Rs(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Fs(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function rr(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Os)):e===void 0&&(e=Hs);for(var n=new Rt(t),r,i=[n],o,a,s,c;r=i.pop();)if((a=e(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new Rt(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(ir)}function Gs(){return rr(this).eachBefore(Bs)}function Hs(t){return t.children}function Os(t){return Array.isArray(t)?t[1]:null}function Bs(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ir(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Rt(t){this.data=t,this.depth=this.height=0,this.parent=null}Rt.prototype=rr.prototype={constructor:Rt,count:ks,each:Ls,eachAfter:zs,eachBefore:Ms,find:Cs,sum:Ts,sort:As,path:Es,ancestors:Ds,descendants:Is,leaves:$s,links:Rs,copy:Gs,[Symbol.iterator]:Fs};function ge(t){return t==null?null:Xs(t)}function Xs(t){if(typeof t!="function")throw new Error;return t}var qs={depth:-1},pn={},me={};function Ys(t){return t.id}function Vs(t){return t.parentId}function Me(){var t=Ys,e=Vs,n;function r(i){var o=Array.from(i),a=t,s=e,c,l,u,g,h,f,x,v,d=new Map;if(n!=null){const p=o.map((m,S)=>Us(n(m,S,i))),w=p.map(gn),b=new Set(p).add("");for(const m of w)b.has(m)||(b.add(m),p.push(m),w.push(gn(m)),o.push(me));a=(m,S)=>p[S],s=(m,S)=>w[S]}for(u=0,c=o.length;u<c;++u)l=o[u],f=o[u]=new Rt(l),(x=a(l,u,i))!=null&&(x+="")&&(v=f.id=x,d.set(v,d.has(v)?pn:f)),(x=s(l,u,i))!=null&&(x+="")&&(f.parent=x);for(u=0;u<c;++u)if(f=o[u],x=f.parent){if(h=d.get(x),!h)throw new Error("missing: "+x);if(h===pn)throw new Error("ambiguous: "+x);h.children?h.children.push(f):h.children=[f],f.parent=h}else{if(g)throw new Error("multiple roots");g=f}if(!g)throw new Error("no root");if(n!=null){for(;g.data===me&&g.children.length===1;)g=g.children[0],--c;for(let p=o.length-1;p>=0&&(f=o[p],f.data===me);--p)f.data=null}if(g.parent=qs,g.eachBefore(function(p){p.depth=p.parent.depth+1,--c}).eachBefore(ir),g.parent=null,c>0)throw new Error("cycle");return g}return r.id=function(i){return arguments.length?(t=ge(i),r):t},r.parentId=function(i){return arguments.length?(e=ge(i),r):e},r.path=function(i){return arguments.length?(n=ge(i),r):n},r}function Us(t){t=`${t}`;let e=t.length;return ze(t,e-1)&&!ze(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function gn(t){let e=t.length;if(e<2)return"";for(;--e>1&&!ze(t,e););return t.slice(0,e)}function ze(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}const Vt=t=>()=>t;function Ws(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function lt(t,e,n){this.k=t,this.x=e,this.y=n}lt.prototype={constructor:lt,scale:function(t){return t===1?this:new lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var he=new lt(1,0,0);or.prototype=lt.prototype;function or(t){for(;!t.__zoom;)if(!(t=t.parentNode))return he;return t.__zoom}function ye(t){t.stopImmediatePropagation()}function Mt(t){t.preventDefault(),t.stopImmediatePropagation()}function js(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ks(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function mn(){return this.__zoom||he}function Zs(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Qs(){return navigator.maxTouchPoints||"ontouchstart"in this}function Js(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function tc(){var t=js,e=Ks,n=Js,r=Zs,i=Qs,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Ro,l=Gt("start","zoom","end"),u,g,h,f=500,x=150,v=0,d=10;function p(y){y.property("__zoom",mn).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",R).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(y,k,N,L){var z=y.selection?y.selection():y;z.property("__zoom",mn),y!==z?S(y,k,N,L):z.interrupt().each(function(){M(this,arguments).event(L).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},p.scaleBy=function(y,k,N,L){p.scaleTo(y,function(){var z=this.__zoom.k,A=typeof k=="function"?k.apply(this,arguments):k;return z*A},N,L)},p.scaleTo=function(y,k,N,L){p.transform(y,function(){var z=e.apply(this,arguments),A=this.__zoom,E=N==null?m(z):typeof N=="function"?N.apply(this,arguments):N,I=A.invert(E),F=typeof k=="function"?k.apply(this,arguments):k;return n(b(w(A,F),E,I),z,a)},N,L)},p.translateBy=function(y,k,N,L){p.transform(y,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof N=="function"?N.apply(this,arguments):N),e.apply(this,arguments),a)},null,L)},p.translateTo=function(y,k,N,L,z){p.transform(y,function(){var A=e.apply(this,arguments),E=this.__zoom,I=L==null?m(A):typeof L=="function"?L.apply(this,arguments):L;return n(he.translate(I[0],I[1]).scale(E.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof N=="function"?-N.apply(this,arguments):-N),A,a)},L,z)};function w(y,k){return k=Math.max(o[0],Math.min(o[1],k)),k===y.k?y:new lt(k,y.x,y.y)}function b(y,k,N){var L=k[0]-N[0]*y.k,z=k[1]-N[1]*y.k;return L===y.x&&z===y.y?y:new lt(y.k,L,z)}function m(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function S(y,k,N,L){y.on("start.zoom",function(){M(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(L).end()}).tween("zoom",function(){var z=this,A=arguments,E=M(z,A).event(L),I=e.apply(z,A),F=N==null?m(I):typeof N=="function"?N.apply(z,A):N,K=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),H=z.__zoom,U=typeof k=="function"?k.apply(z,A):k,Q=c(H.invert(F).concat(K/H.k),U.invert(F).concat(K/U.k));return function(W){if(W===1)W=U;else{var X=Q(W),kt=K/X[2];W=new lt(kt,F[0]-X[0]*kt,F[1]-X[1]*kt)}E.zoom(null,W)}})}function M(y,k,N){return!N&&y.__zooming||new T(y,k)}function T(y,k){this.that=y,this.args=k,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,k),this.taps=0}T.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,k){return this.mouse&&y!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var k=et(this.that).datum();l.call(y,this.that,new Ws(y,{sourceEvent:this.sourceEvent,target:p,type:y,transform:this.that.__zoom,dispatch:l}),k)}};function P(y,...k){if(!t.apply(this,arguments))return;var N=M(this,k).event(y),L=this.__zoom,z=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,r.apply(this,arguments)))),A=ct(y);if(N.wheel)(N.mouse[0][0]!==A[0]||N.mouse[0][1]!==A[1])&&(N.mouse[1]=L.invert(N.mouse[0]=A)),clearTimeout(N.wheel);else{if(L.k===z)return;N.mouse=[A,L.invert(A)],Kt(this),N.start()}Mt(y),N.wheel=setTimeout(E,x),N.zoom("mouse",n(b(w(L,z),N.mouse[0],N.mouse[1]),N.extent,a));function E(){N.wheel=null,N.end()}}function $(y,...k){if(h||!t.apply(this,arguments))return;var N=y.currentTarget,L=M(this,k,!0).event(y),z=et(y.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",K,!0),A=ct(y,N),E=y.clientX,I=y.clientY;On(y.view),ye(y),L.mouse=[A,this.__zoom.invert(A)],Kt(this),L.start();function F(H){if(Mt(H),!L.moved){var U=H.clientX-E,Q=H.clientY-I;L.moved=U*U+Q*Q>v}L.event(H).zoom("mouse",n(b(L.that.__zoom,L.mouse[0]=ct(H,N),L.mouse[1]),L.extent,a))}function K(H){z.on("mousemove.zoom mouseup.zoom",null),Bn(H.view,L.moved),Mt(H),L.event(H).end()}}function D(y,...k){if(t.apply(this,arguments)){var N=this.__zoom,L=ct(y.changedTouches?y.changedTouches[0]:y,this),z=N.invert(L),A=N.k*(y.shiftKey?.5:2),E=n(b(w(N,A),L,z),e.apply(this,k),a);Mt(y),s>0?et(this).transition().duration(s).call(S,E,L,y):et(this).call(p.transform,E,L,y)}}function R(y,...k){if(t.apply(this,arguments)){var N=y.touches,L=N.length,z=M(this,k,y.changedTouches.length===L).event(y),A,E,I,F;for(ye(y),E=0;E<L;++E)I=N[E],F=ct(I,this),F=[F,this.__zoom.invert(F),I.identifier],z.touch0?!z.touch1&&z.touch0[2]!==F[2]&&(z.touch1=F,z.taps=0):(z.touch0=F,A=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(z.taps<2&&(g=F[0],u=setTimeout(function(){u=null},f)),Kt(this),z.start())}}function B(y,...k){if(this.__zooming){var N=M(this,k).event(y),L=y.changedTouches,z=L.length,A,E,I,F;for(Mt(y),A=0;A<z;++A)E=L[A],I=ct(E,this),N.touch0&&N.touch0[2]===E.identifier?N.touch0[0]=I:N.touch1&&N.touch1[2]===E.identifier&&(N.touch1[0]=I);if(E=N.that.__zoom,N.touch1){var K=N.touch0[0],H=N.touch0[1],U=N.touch1[0],Q=N.touch1[1],W=(W=U[0]-K[0])*W+(W=U[1]-K[1])*W,X=(X=Q[0]-H[0])*X+(X=Q[1]-H[1])*X;E=w(E,Math.sqrt(W/X)),I=[(K[0]+U[0])/2,(K[1]+U[1])/2],F=[(H[0]+Q[0])/2,(H[1]+Q[1])/2]}else if(N.touch0)I=N.touch0[0],F=N.touch0[1];else return;N.zoom("touch",n(b(E,I,F),N.extent,a))}}function O(y,...k){if(this.__zooming){var N=M(this,k).event(y),L=y.changedTouches,z=L.length,A,E;for(ye(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),A=0;A<z;++A)E=L[A],N.touch0&&N.touch0[2]===E.identifier?delete N.touch0:N.touch1&&N.touch1[2]===E.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(E=ct(E,this),Math.hypot(g[0]-E[0],g[1]-E[1])<d)){var I=et(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return p.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Vt(+y),p):r},p.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Vt(!!y),p):t},p.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Vt(!!y),p):i},p.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Vt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),p):e},p.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],p):[o[0],o[1]]},p.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(y){return arguments.length?(n=y,p):n},p.duration=function(y){return arguments.length?(s=+y,p):s},p.interpolate=function(y){return arguments.length?(c=y,p):c},p.on=function(){var y=l.on.apply(l,arguments);return y===l?p:y},p.clickDistance=function(y){return arguments.length?(v=(y=+y)*y,p):Math.sqrt(v)},p.tapDistance=function(y){return arguments.length?(d=+y,p):d},p}var ar={};Object.defineProperty(ar,"__esModule",{value:!0});const ec="bcdfghjklmnpqrstvwxyzbpcrtpcrddrtplmnplmnbbcbcdrbnmklhgd",nc="aeiou";class rc{constructor(e=[],n=3,r="",i=""){this.themeWords=e,this.themeWordDensity=n,this.vowels=nc+r,this.consonants=ec+i}createWord(e,n=!1,r=!1){let i="";if(!r&&this.themeWords.length&&Math.floor(Math.random()*this.themeWordDensity)<1)i=this.themeWords[Math.floor(Math.random()*this.themeWords.length)];else{let o="consonants";for(let a=0;a<e;a++)o==="consonants"?(i+=this.consonants.substr(Math.floor(Math.random()*this.consonants.length),1),o="vowels"):(i+=this.vowels.substr(Math.floor(Math.random()*this.vowels.length),1),o="consonants")}return n&&(i=this._jsUcfirst(i)),i}createParagraph(e){let n="",r=!0;for(let i=0;i<e;i++)n+=this.createWord(2+Math.floor(Math.random()*9),r),Math.floor(Math.random()*9)<1?(n+=". ",r=!0):(n+=" ",r=!1);return n.trim()+"."}createFullName(e=!0){return(e?Math.random()>.5?"Mr. ":"Ms. ":"")+this.createWord(3+Math.floor(Math.random()*5),!0,!0)+" "+this.createWord(2+Math.floor(Math.random()*9),!0,!0)}createEmail(e){const n=typeof e>"u"?"domain.com":e;return this.createWord(3+Math.floor(Math.random()*5),!1,!0)+"."+this.createWord(2+Math.floor(Math.random()*9),!1,!0)+"@"+n}_jsUcfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}}var ic=ar.default=rc;const sr=new ic;function ve(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function Tt(t,e){return Math.floor(Math.random()*(e-t+1)+t)}const oc=(t,e=1)=>zn(e).map(()=>ac(t)).reduce((n,r)=>{const i=n.nodes[Tt(n.nodes.length/2,n.nodes.length-1)],o=r.nodes[Tt(r.nodes.length/2,r.nodes.length-1)];return n.nodes.push(...r.nodes),n.links.push(...r.links),n.parents.push(...r.parents),i&&Math.random()>.5&&n.links.push({source:i.id,target:o.id,id:`${i.id}-${o.id}`}),n},{nodes:[],links:[],parents:[]}),ac=t=>{let e={id:ve(),name:yn()};const n=[e],r=zn(t).map(a=>(Math.random()>.75&&(e={id:ve(),name:yn()},n.push(e)),{isServer:a===0,name:sc(e.name),id:ve(),parent:e.id})),o=[...Ce([...r])].map(([a,s])=>({source:a.id,target:s.id,id:`${a.id}-${s.id}`}));return{nodes:r,links:o,parents:n}};function Ce(t,e=[]){let n=-1,r;for(;++n<t.length;)if(r=n+1,t[r]&&(e.push([t[n],t[r]]),Math.random()>.25)){const i=Tt(1,5),o=Tt(1,5);e.push(...Ce([t[r],...t.splice(r+1,i)])),e[o]&&e.push(...Ce([t[r],...t.splice(r+1,o),...Math.random()>.75?[t[Tt(r,t.length-1)]]:[]]))}return e}const cr=" Corp.";function yn(){return sr.createFullName(!1).split(" ")[0]+cr}function sc(t){const e=t.replace(cr,"")+"Corp.com";return sr.createEmail(e)}class At{constructor(e){_(this,"id");_(this,"parent");_(this,"name");_(this,"level");_(this,"type");_(this,"linkSignature",[]);_(this,"baseLinks",[]);_(this,"parentLink");_(this,"isServer",!1);_(this,"start");_(this,"end");_(this,"removeClassName");_(this,"className");_(this,"shape");_(this,"x");_(this,"y");_(this,"fx");_(this,"fy");_(this,"vx");_(this,"vy");_(this,"index");_(this,"r");this.id=e.id,this.parent=e.parent,this.name=e.name,this.level=e.level,this.type=e.type,this.parentLink=e.parentLink,this.className=e.className,this.shape=e.shape,e.isServer&&(this.isServer=e.isServer),e.start&&(this.start=new Date(e.start)),e.end&&(this.end=new Date(e.end))}}class lr{constructor(e){_(this,"source");_(this,"target");_(this,"id");_(this,"parent");_(this,"type");_(this,"parentNode");_(this,"baseLinks",[]);this.source=e.source,this.target=e.target,this.id=e.id,this.parent=e.parent,this.type=e.type,this.parentNode=e.parentNode}}class cc{constructor(e){_(this,"source");_(this,"target");_(this,"id");_(this,"graphLinks",[]);this.source=e.source,this.target=e.target,this.id=e.id}}class lc{constructor(e){_(this,"source");_(this,"target");_(this,"id");_(this,"graphLinks",[]);_(this,"currentTimeState");_(this,"data");this.source=e.source,this.target=e.target,this.id=e.id,this.graphLinks=e.graphLinks,this.data=e.data}}function G(t){return t||0}const _t=(t,e,n)=>(t.has(e)||t.set(e,n),t.get(e)),J=()=>{};function uc(t){const e=window;e.Cypress&&(e.graph=t)}function vn(t){return[...new Set(t)].sort()}function hc(t,e=!0){const n=Object.assign(t);e&&(n.nodes=n.nodes.filter(d=>d.id==null||d.parent==null?(console.warn("A graphData node did not contain all required properties and is being removed",{errorNode:d}),!1):!0),n.links=n.links.filter(d=>d.source==null||d.source==null?(console.warn("A graphData link did not contain all required properties and is being removed",{errorLink:d}),!1):!0)),n.parents||(n.parents=[]);const r=new Map(n.parents.map(d=>[d.id,d])),i=new Map;n.nodes.forEach(d=>{const{className:p,name:w}=r.get(d.parent)||{};_t(i,d.parent,new At({...d,className:p,name:w,id:d.parent,parent:tt.rootNodeName,level:"super",type:"keyNode"}))});const o=new Map(n.nodes.map(d=>[d.id,new At({...d,level:"sub",type:"keyNode"})])),a=new Map;n.links.forEach(d=>{const{source:p,target:w}=d,b=[p,w].sort().join(tt.idDelimiter);_t(a,b,new cc({source:p,target:w,id:b}))}),a.forEach(d=>{const p=o.get(d.source),w=o.get(d.target);p.parent===w.parent?(p.linkSignature.push(w.id),w.linkSignature.push(p.id)):(p.linkSignature.push(w.parent),w.linkSignature.push(p.parent)),p.baseLinks.push(d.id),w.baseLinks.push(d.id)});const s=new Map;o.forEach(d=>{d.linkSignature=[d.parent,...vn(d.linkSignature),tt.groupNodeSuffix];const p=d.linkSignature.join(tt.idDelimiter);_t(s,p,new At({id:p,parent:d.parent,level:"group",type:"keyNode"})),d.parent=p});const c=[{id:tt.rootNodeName},...i.values(),...s.values(),...o.values()],l=Me().id(d=>d.id).parentId(d=>d.parent)(c),u=new Map(l.descendants().map(d=>[d.id,d])),g=new Map,h=new Map;a.forEach(d=>{var b,m,S,M,T,P,$,D,R,B,O,y,k,N,L,z,A,E,I,F,K,H,U,Q,W;const p=u.get(d.source),w=u.get(d.target);if(((b=p==null?void 0:p.parent)==null?void 0:b.id)===((m=w==null?void 0:w.parent)==null?void 0:m.id))console.warn((S=p==null?void 0:p.parent)==null?void 0:S.id);else if((M=p.parent)!=null&&M.parent&&((T=w.parent)!=null&&T.parent)&&(($=(P=p.parent)==null?void 0:P.parent)==null?void 0:$.id)===((R=(D=w.parent)==null?void 0:D.parent)==null?void 0:R.id)){const X=wn(p.parent,w.parent,h,d);vt(p,h,g,d,X),vt(w,h,g,d,X)}else if((O=(B=p.parent)==null?void 0:B.parent)!=null&&O.parent&&((k=(y=w.parent)==null?void 0:y.parent)!=null&&k.parent)&&((z=(L=(N=p.parent)==null?void 0:N.parent)==null?void 0:L.parent)==null?void 0:z.id)===((I=(E=(A=w.parent)==null?void 0:A.parent)==null?void 0:E.parent)==null?void 0:I.id)){const X=wn(p.parent.parent,w.parent.parent,h,d),kt=vt(p.parent,h,g,d,X),xr=vt(w.parent,h,g,d,X);vt(p,h,g,d,kt),vt(w,h,g,d,xr)}else console.warn((H=(K=(F=p.parent)==null?void 0:F.parent)==null?void 0:K.parent)==null?void 0:H.id,(W=(Q=(U=w.parent)==null?void 0:U.parent)==null?void 0:Q.parent)==null?void 0:W.id)}),a.forEach(d=>{d.graphLinks=vn(d.graphLinks)});const f=[{id:tt.rootLinkName},...h.values()];return{nodes:[{id:tt.rootNodeName},...i.values(),...s.values(),...o.values(),...g.values()],links:f,baseLinks:[...a.values()]}}function wn(t,e,n,r){var c;const i=t.id,o=e.id,a=t.parent.id,s=fc(i,o);return(c=_t(n,s,new lr({source:i,target:o,id:s,parent:tt.rootLinkName,type:"siblingLink",parentNode:a})))==null||c.baseLinks.push(r.id),r.graphLinks.push(s),s}function vt(t,e,n,r,i){var s,c;const o=[t.parent.id,i,tt.parentLinkNodeSuffix].join(tt.idDelimiter);(s=_t(n,o,new At({id:o,type:"parentLinkNode",parent:t.parent.id,level:t.parent.data.level,parentLink:i})))==null||s.baseLinks.push(r.id);const a=[t.id,o].join(tt.idDelimiter);return(c=_t(e,a,new lr({source:t.id,target:o,id:a,parent:i,type:"parentLink",parentNode:t.parent.id})))==null||c.baseLinks.push(r.id),r.graphLinks.push(a),a}function fc(t,e){return[t,e].sort().join(tt.idDelimiter)}const dc={idDelimiter:"/",parentLinkNodeSuffix:"linkNode",groupNodeSuffix:"groupNode",rootNodeName:"rootNode",rootLinkName:"rootLink"},tt=dc;class pc{constructor({graphData:e,onSelectionChange:n=J,onPreviewChange:r=J,onTimeChange:i=J,onDataChange:o=J,previouslyParsedGraphData:a}){_(this,"rootNode");_(this,"rootLink");_(this,"baseLinks",new Map);_(this,"allNodes",new Map);_(this,"allLinks",new Map);_(this,"onDataChange");_(this,"currentTime",0);_(this,"pastSet",new Set);_(this,"presentSet",new Set);_(this,"onTimeChange");_(this,"selectionSet",new Set);_(this,"previewSet",new Set);_(this,"onSelectionChange");_(this,"onPreviewChange");this.onSelectionChange=n,this.onPreviewChange=r,this.onTimeChange=i,this.onDataChange=o,this.updateGraphData(e,{previouslyParsedGraphData:a,mergeWithCurrentGraphData:a!=null,fireEvent:!1})}get parsedGraphData(){return{nodes:Array.from(this.allNodes.values()).map(e=>({...e.data,x:e.x,y:e.y})),links:Array.from(this.allLinks.values()).map(e=>e.data),baseLinks:Array.from(this.baseLinks.values()).map(e=>e.data)}}updateGraphData(e,n){const{mergeWithCurrentGraphData:r=!0,previouslyParsedGraphData:i,fireEvent:o=!0}=n||{},a=hc(e);if(r){const s=i!=null?new Map(i.nodes.map(c=>[c.id,c])):this.allNodes.size>0?this.allNodes:null;s!=null&&a.nodes.forEach(c=>{const l=s.get(c.id);l&&(c.x=l.x,c.y=l.y)})}this.stratifyGraph(a),o&&this.onDataChange()}stratifyGraph(e){const n=Object.assign(e);this.rootLink=Me().id(r=>r.id).parentId(r=>r.parent)(n.links),this.rootNode=Me().id(r=>r.id).parentId(r=>r.parent)(n.nodes),this.allLinks=new Map(this.rootLink.descendants().map(r=>[r.id,r])),this.allNodes=new Map(this.rootNode.descendants().map(r=>[r.id,r])),this.baseLinks=new Map(n.baseLinks.map(r=>[r.id,new lc({source:this.allNodes.get(r.source),target:this.allNodes.get(r.target),id:r.id,graphLinks:r.graphLinks.map(i=>this.allLinks.get(i)),data:r})])),this.allNodes.forEach(r=>{r.graphLinks=[],r.parent!=null&&(r.baseLinks=r.data.baseLinks.map(i=>this.baseLinks.get(i)),r.type=r.data.type,r.data.parentLink&&(r.parentLink=this.allLinks.get(r.data.parentLink)),r.x=r.data.x,r.y=r.data.y,r.fx=r.data.fx,r.fy=r.data.fy)}),this.allLinks.forEach(r=>{if(r.parent==null)return;r.source=this.allNodes.get(r.data.source),r.target=this.allNodes.get(r.data.target),r.baseLinks=r.data.baseLinks.map(o=>this.baseLinks.get(o)),r.type=r.data.type,this.allNodes.get(r.data.parentNode).graphLinks.push(r)})}get timeState(){return{currentTime:this.currentTime,pastNodeIds:xn(this.pastSet),presentNodeIds:xn(this.presentSet)}}setTimeState(e,n=!0){this.clearTime(!1);const{currentTime:r,pastNodeIds:i,presentNodeIds:o}=e;this.currentTime=r,this.pastSet=_n(i,this.allNodes),this.presentSet=_n(o,this.allNodes),this.allNodes.forEach(u=>u.data.isServer?void 0:u.currentTimeState="future"),[[this.pastSet,"past"],[this.presentSet,"present"]].forEach(([u,g])=>{u.forEach(h=>{let f=h;for(;f;)f.currentTimeState=g,f=f.parent})}),this.allLinks.forEach(u=>u.currentTimeState="future"),this.baseLinks.forEach(u=>u.currentTimeState=void 0);const s=new Set,c=new Set;this.baseLinks.forEach(u=>{u.currentTimeState=gc(u.source,u.target),u.currentTimeState==="past"&&s.add(u),u.currentTimeState==="present"&&c.add(u)}),[[s,"past"],[c,"present"]].forEach(([u,g])=>{u.forEach(h=>{h.graphLinks.forEach(f=>{f.currentTimeState=g})})}),n&&this.onTimeChange()}clearTime(e=!0){this.currentTime=0,this.pastSet.clear(),this.presentSet.clear(),this.allNodes.forEach(n=>n.currentTimeState=void 0),this.allLinks.forEach(n=>n.currentTimeState=void 0),this.baseLinks.forEach(n=>n.currentTimeState=void 0),e&&this.onTimeChange()}clearSet(e){const n=e==="preview"?this.previewSet:this.selectionSet,r=e==="preview"?"previewed":"selected",i=e==="preview"?"previewedFocus":"selectedFocus",o=e==="preview"?"previewedParent":"selectedParent";n.forEach(a=>{a[r]=void 0,a[i]=void 0,a[o]=void 0}),n.clear()}addToSet(e,n){const r=n==="preview"?this.previewSet:this.selectionSet,i=n==="preview"?"previewed":"selected",o=n==="preview"?"previewedFocus":"selectedFocus",a=n==="preview"?"previewedParent":"selectedParent";function s(g){let h=g.parent;for(;h;)h[a]=!0,r.add(h),h=h.parent}function c(g){if(!(g==null||g.parent==null))if(g.data.isServer){const h=g.ancestors().find(x=>x.type==="keyNode"&&x.depth===1)||g,f=h.leaves().find(x=>x.type==="keyNode")||g;[h,f].forEach(x=>{x[i]=!0,r.add(x)})}else g[i]=!0,r.add(g),s(g)}function l(g){g[i]=!0,r.add(g)}if(e.data.isServer){const g=e.ancestors().find(f=>f.type==="keyNode"&&f.depth===1)||e,h=g.leaves().find(f=>f.type==="keyNode")||e;g[o]=!0,c(g),e=h}e[o]=!0,c(e),e.baseLinks.length>0?e.baseLinks.forEach(g=>{g.graphLinks.forEach(h=>{l(h)}),c(g.source),c(g.target)}):e.graphLinks.filter(h=>h.type="parentLink").forEach(h=>{const f=h.parent;f&&f.parent!=null&&(l(f),c(f.target),c(f.source))})}selectNodes(e,n=!0){this.clearSelection(!1);for(let r=0;r<e.length;r++){const i=e[r],o=typeof i=="string"?this.allNodes.get(i):i;if(!o)return;this.addNodeToSelection(o,!1),n&&this.onSelectionChange(o,Array.from(this.selectionSet))}}addNodeToSelection(e,n=!0){this.addToSet(e,"selection"),n&&this.onSelectionChange(e,Array.from(this.selectionSet))}clearSelection(e=!0){this.clearSet("selection"),e&&this.onSelectionChange()}previewNode(e,n=!0){const r=typeof e=="string"?this.allNodes.get(e):e;r&&(this.clearPreview(!1),this.addNodeToPreview(r,!1),n&&this.onPreviewChange(r,Array.from(this.selectionSet)))}addNodeToPreview(e,n=!0){this.addToSet(e,"preview"),n&&this.onPreviewChange(e,Array.from(this.selectionSet))}clearPreview(e=!0){this.clearSet("preview"),e&&this.onPreviewChange()}}const xn=t=>Array.from(t).map(e=>e.id||""),_n=(t,e)=>new Set(t.map(n=>e.get(n)).filter(n=>n)),gc=(t,e)=>{const n=t.currentTimeState,r=e.currentTimeState;if(n===r)return n;if(n==="future"||r==="future")return"future";if(n==="past"||r==="past")return"past";if(n==="present"||r==="present")return"present"},ur=([t,e],n)=>{let r=t,i=e;if(!n)return{x:r,y:i,wasClamped:!1};if(n<0)return{x:0,y:0,wasClamped:!0};const o=Math.hypot(r,i);if(o>n){const s=Math.atan2(r,i);r=Math.sin(s)*n,i=Math.cos(s)*n}const a=o>n;return{x:r,y:i,wasClamped:a,xyRadius:o,radius:n}};function hr(t=30){let e,n;const r=typeof t!="function"?mc(+t):t;function i(a){for(let s=0,c=e.length;s<c;++s){const l=e[s],u=n[s],g=l.x+l.vx,h=l.y+l.vy,{wasClamped:f,x,y:v}=ur([g,h],u);f&&(l.vx=0,l.vy=0,l.x=x,l.y=v)}}function o(){if(!e)return;let a;const s=e.length;for(n=new Array(s),a=0;a<s;++a)n[a]=+r(e[a],a,e)}return i.initialize=function(a){e=a,o()},i}function mc(t){return function(...e){return t}}function fr(t){var n;(((n=t.children)==null?void 0:n.filter(r=>r.type==="parentLinkNode"))||[]).forEach(r=>{const{source:i,target:o}=r.parentLink;let a=G(i.x)-G(o.x),s=G(i.y)-G(o.y);t.id===i.id&&(a*=-1,s*=-1);const[l,u]=dr(a,s,t.r||1);r.fx=l,r.fy=u})}function dr(t,e,n){const r=Math.atan2(t,e),i=Math.sin(r)*n,o=Math.cos(r)*n;return[i,o]}function yc(t,e,n,r,i=1,o="by"){const a=n-t,s=r-e,c=o==="to"?i:Math.hypot(a,s)-i,[l,u]=dr(a,s,c);return{source:{x:t,y:e},target:{x:t+l,y:e+u}}}const pr=t=>Math.PI*t*t,gr=t=>Math.sqrt(t/Math.PI),Nt=({d:t,zk:e=1,rk:n=1,zx:r=0,zy:i=0,tx:o=0,ty:a=0})=>`translate(${G(t.x)*n*e+r+o}, ${G(t.y)*n*e+i+a})`,Ft=t=>t.previewedFocus||t.selectedFocus||t.selectedParent||t.previewedParent||!1,mr=t=>t.selected||t.previewed||Ft(t),vc=t=>t.selected||t.selectedFocus||t.selectedParent||!1,wc=t=>t.previewed||t.previewedFocus||t.previewedParent||!1,Nn=t=>wc(t)?3:vc(t)?2:t.data instanceof At?1:0,Ye=(t,e)=>Nn(t)-Nn(e),it=(t,e,n)=>{var i,o;const r=n[e];t.data.removeClassName&&((i=r==null?void 0:r.classList)==null||i.remove(t.data.removeClassName)),t.data.className&&((o=r==null?void 0:r.classList)==null||o.add(t.data.className))},mt=t=>t.type!=="parentLinkNode"?t.data.id:null,xc="-label",yr=t=>mt(t)+xc;function Sn(t,e=0){return e=Math.pow(10,e),Math.round(t*e)/e}const _c="http://www.w3.org/2000/svg",Nc=t=>document.createElementNS(_c,t),C={graphRoot:"graphRoot",isZooming:"isZooming",transformWrapper:"transformWrapper",superGraph:"superGraph",groupGraph:"groupGraph",subGraph:"subGraph",superNode:"superNode",groupNode:"groupNode",subNode:"subNode",serverNode:"serverNode",computerNode:"computerNode",softwareNode:"softwareNode",superNodeCountLabel:"superNodeCountLabel",superNodeNameLabel:"superNodeNameLabel",subNodeNameLabel:"subNodeNameLabel",occludedLabel:"occludedLabel",hiddenLabel:"hiddenLabel",keyNode:"keyNode",siblingLink:"siblingLink",parentLinkNode:"parentLinkNode",parentLink:"parentLink",previewed:"previewed",previewedFocus:"previewedFocus",previewedParent:"previewedParent",selected:"selected",selectedFocus:"selectedFocus",selectedParent:"selectedParent",future:"future",present:"present",past:"past"};class Ve{constructor({rootNode:e,rootSelection:n,parentGraph:r,graphHandler:i}){_(this,"rootNode");_(this,"parentNode");_(this,"links");_(this,"nodes");_(this,"keyNodes");_(this,"parentLinkNodes");_(this,"simulation");_(this,"simulationForces",[]);_(this,"rootSelection");_(this,"rootGroupSelection");_(this,"childGraphRootSelection");_(this,"linkSelection");_(this,"nodeSelection");_(this,"labelSelection");_(this,"parentGraph");_(this,"childGraphs",[]);_(this,"graphHandler");_(this,"isHidden",!1);this.rootNode=e,this.parentNode=this.rootNode.parent||void 0,this.links=this.rootNode.graphLinks||[],this.nodes=this.rootNode.children||[],this.keyNodes=this.nodes.filter(o=>o.type==="keyNode")||[],this.parentLinkNodes=this.nodes.filter(o=>o.type==="parentLinkNode")||[],this.parentGraph=r,this.graphHandler=i,this.rootSelection=n}initialize(e=!1){this.initializeForces(),this.initializeSelection(),e&&this.hideLayout(),this.initializeSimulationLayout()}initializeForces(){this.simulation=Ss(this.nodes).on("tick",this.drawLayout.bind(this))}initializeSelection(){}initializeSimulationLayout(){this.useGraphForces(),this.simulation.alphaDecay(.001).alphaTarget(.7).tick(300).alphaTarget(0).alphaDecay(.1).restart().tick(500).stop(),this.drawLayout()}initializeChildGraphs(e){this.childGraphRootSelection&&e!=null&&(this.childGraphs=[],this.childGraphRootSelection.filter(n=>n.type==="keyNode").each((n,r,i)=>{var o;(o=this.childGraphs)==null||o.push(new e({rootNode:n,rootSelection:et(i[r]),parentGraph:this,graphHandler:this.graphHandler}))}))}callChildrenRecursively(e){var n;this[e](),(n=this.childGraphs)==null||n.forEach(r=>r.callChildrenRecursively(e))}useGraphForces(){for(let e=0;e<this.simulationForces.length;e++){const{name:n,force:r}=this.simulationForces[e];this.simulation.force(n,r)}}useSimpleForces(){for(let e=0;e<this.simulationForces.length;e++){const{name:n,force:r,optional:i}=this.simulationForces[e],o=i?null:r;this.simulation.force(n,o)}}reheat(e=0){var n;this.simulation.alphaTarget(e).restart(),(n=this.childGraphs)==null||n.forEach(r=>r.reheat(e))}cool(){var e;this.simulation.alphaTarget(0),(e=this.childGraphs)==null||e.forEach(n=>n.cool())}freeze(){var e;this.simulation.stop(),(e=this.childGraphs)==null||e.forEach(n=>n.freeze())}drawLayout(){}drawInteraction(){[this.rootSelection,this.rootGroupSelection,this.linkSelection,this.nodeSelection,this.labelSelection].forEach(e=>{e==null||e.classed(C.selected,n=>!!n.selected).classed(C.selectedFocus,n=>!!n.selectedFocus).classed(C.selectedParent,n=>!!n.selectedParent).classed(C.previewed,n=>!!n.previewed).classed(C.previewedFocus,n=>!!n.previewedFocus).classed(C.previewedParent,n=>!!n.previewedParent)})}drawTime(e=[]){const n=[C.present,C.past,C.future].join(" ");[this.nodeSelection,this.linkSelection,this.labelSelection,...e].forEach(r=>{r==null||r.classed(n,!1).filter(i=>!i.data.isServer).classed(C.past,i=>i.currentTimeState==="past").classed(C.present,i=>i.currentTimeState==="present").classed(C.future,i=>i.currentTimeState==="future")})}drawUpdateLabel(){}drawUpdateNodeVisual(){}hideLayout(){this.isHidden||this.rootGroupSelection.remove(),this.isHidden=!0}showLayout(){var e;this.isHidden&&((e=this.rootSelection.node())==null||e.appendChild(this.rootGroupSelection.node())),this.isHidden=!1}}function Sc(t,e=1,n=0,r=0){t=t<3?3:t,n=n*Math.PI/180;const i=2*Math.PI/t,o=[];for(let a=0;a<t;a++)o.push([r+Sn(e*Math.sin(a*i+n),2),r+Sn(e*Math.cos(a*i+n),2)]);return o}function vr(t,e,n,r){return Sc(t,e,n,r).map(i=>i.join(",")).join(" ")}const bc={triangleUp:[3,180],triangleDown:[3,0],diamond:[4,90],square:[4,45],pentagonUp:[5,180],pentagonDown:[5,0],hexagonUp:[6,0],hexagonDown:[6,90]},bn={};function kc(t,e=1,n){const r=[t,e,n].join("-");let i=bn[r];if(i==null){const[o,a]=bc[t],s=Math.PI*e*e,c=1+o*.03,l=Lc(o,s)*c;i=vr(o,l,a,n),bn[r]=i}return i}function Lc(t,e=Math.PI){return Math.sqrt(e*2/(Math.sin(2*Math.PI/t)*t))}const oe=class oe extends Ve{constructor(e){super(e),super.initialize(!0)}initializeForces(){this.nodes.forEach(o=>o.r=o.type==="parentLinkNode"?1:oe.radius(o));const e=Be().strength(o=>o.type==="keyNode"?-4:0),n=Oe(this.links).strength(0).distance(this.rootNode.r*.3),r=hr(o=>o.type==="keyNode"?this.rootNode.r-2:0),i=!0;this.simulationForces=[{name:"positionParentLinkNodes",force:()=>fr(this.rootNode)},{name:"link",force:n,optional:i},{name:"charge",force:e,optional:i},{name:"x",force:Xe(0),optional:i},{name:"y",force:qe(0),optional:i},{name:"clamp",force:r}],super.initializeForces()}initializeSelection(){this.rootGroupSelection=this.rootSelection.data([this.rootNode]).append("g").attr(C.subGraph,!0).attr("transform-origin","center").attr("cy-test","subGSelection").attr("id",mt),this.linkSelection=this.rootGroupSelection.selectAll("line").data(this.links).join("line").classed(C.siblingLink,e=>e.type==="siblingLink").classed(C.parentLink,e=>e.type==="parentLink").attr("cy-test","subLinkSelection").attr("id",mt),this.nodeSelection=this.rootGroupSelection.selectAll(".testing").data(this.nodes).join("g").classed("testing",!0).attr("cy-test","beaconsGraph").attr("id",mt).each(it).classed(C.parentLinkNode,e=>e.type==="parentLinkNode").classed(C.keyNode,e=>e.type==="keyNode").classed(C.subNode,!0).classed(C.softwareNode,!0).on("click",this.graphHandler.clickNode.bind(this.graphHandler)).on("mouseover",this.graphHandler.mouseOverNode.bind(this.graphHandler)),this.drawUpdateNodeVisual(),this.labelSelection=this.rootGroupSelection.append("g").attr("cy-test","selectedLabel").selectAll("text").data(this.nodes.filter(e=>e.type==="keyNode")).join("text").attr("id",yr).each(it).classed(C.subNodeNameLabel,!0).text(kn),super.initializeSelection()}drawUpdateNodeVisual(){var e;(e=this.labelSelection)==null||e.each(it),this.nodeSelection.each(it),this.nodeSelection.selectChildren().remove(),this.nodeSelection.append(n=>Nc(n.data.shape==="circle"||n.data.shape==null?"circle":"polygon")).attr("r",n=>n.r||0).attr("points",n=>n.data.shape&&n.data.shape!=="circle"?kc(n.data.shape,G(n.r)+1):null)}drawLayout(){var n;if(!this.parentNode)return;const{rk:e=1}=this.graphHandler.zoomTransform;this.linkSelection.attr("x1",r=>G(r.source.x)*e).attr("y1",r=>G(r.source.y)*e).attr("x2",r=>G(r.target.x)*e).attr("y2",r=>G(r.target.y)*e),this.nodeSelection.attr("transform",r=>Nt({d:r,rk:e})),(n=this.labelSelection)==null||n.attr("transform",r=>Nt({d:r,rk:e,tx:10,ty:4}))}drawInteraction(){var e;(e=this.labelSelection)==null||e.classed(C.hiddenLabel,n=>!mr(n)),Ft(this.parentNode)?(this.showLayout(),super.drawInteraction(),this.rootGroupSelection.selectChildren().sort(Ye)):this.hideLayout()}drawUpdateLabel(){var e;(e=this.labelSelection)==null||e.text(kn)}};_(oe,"radius",e=>4);let re=oe;const kn=t=>` ${t.data.name||t.data.id}`,ae=class ae extends Ve{constructor(e){super(e),this.initialize(!0),this.initializeChildGraphs(re)}initializeForces(){this.nodes.forEach(s=>s.r=s.type==="keyNode"?ae.radius(s):1.5);const e=Be().strength(s=>s.type==="keyNode"?(s.graphLinks.length||1)*-2-1:0),n=Oe(this.links).strength(s=>s.source.graphLinks.length/100).distance(this.keyNodes.length<2?()=>this.rootNode.r:s=>this.rootNode.r/this.links.length+(s.source.r||1)),r=hr(s=>s.type==="keyNode"?s.parent.r-s.r-2:0),i=nr().strength(.5).radius(s=>s.type==="keyNode"?s.r+2:0),o=()=>fr(this.rootNode),a=!0;this.simulationForces=[{name:"positionParentLinkNodes",force:o},{name:"link",force:n,optional:a},{name:"charge",force:e,optional:a},{name:"x",force:Xe(0).strength(.05),optional:a},{name:"y",force:qe(0).strength(.05),optional:a},{name:"collide",force:i},{name:"clamp",force:r}],super.initializeForces()}initializeSelection(){this.rootGroupSelection=this.rootSelection.data([this.rootNode]).append("g").classed(C.groupGraph,!0).attr("transform-origin","center"),this.linkSelection=this.rootGroupSelection.selectAll("line").data(this.links).join("line").classed(C.siblingLink,e=>e.type==="siblingLink").classed(C.parentLink,e=>e.type==="parentLink"),this.childGraphRootSelection=this.rootGroupSelection.selectAll("g").data(this.nodes).join("g").call(this.graphHandler.initializeDrag(this)),this.nodeSelection=this.childGraphRootSelection.append("g").append("circle").attr("r",e=>e.r||0).style("pointer-events","none").classed(C.parentLinkNode,e=>e.type==="parentLinkNode").classed(C.keyNode,e=>e.type==="keyNode").classed(C.groupNode,!0),super.initializeSelection()}drawLayout(){const{rk:e=1}=this.graphHandler.zoomTransform;this.linkSelection.each(n=>{var r,i,o,a,s;n.shortLink=yc(G((r=n.target)==null?void 0:r.x),G((i=n.target)==null?void 0:i.y),G((o=n.source)==null?void 0:o.x),G((a=n.source)==null?void 0:a.y),(s=n==null?void 0:n.source)==null?void 0:s.r)}).attr("x1",n=>n.shortLink.source.x*e).attr("y1",n=>n.shortLink.source.y*e).attr("x2",n=>n.shortLink.target.x*e).attr("y2",n=>n.shortLink.target.y*e),this.childGraphRootSelection.attr("transform",n=>Nt({d:n,rk:e})),this.nodeSelection.attr("r",n=>G(n.r)*(n.descendants?e:1))}drawInteraction(){Ft(this.rootNode)?(this.showLayout(),super.drawInteraction(),this.rootGroupSelection.selectChildren().sort(Ye)):this.hideLayout()}};_(ae,"radius",e=>{var i;const n=((i=e.children)==null?void 0:i.filter(o=>o.type==="keyNode"))||[];let r=0;for(let o=0;o<n.length;o++){const a=n[o];r+=pr(re.radius(a)+3)}return gr(r)});let ie=ae;const ft=class ft extends Ve{constructor(n){super(n);_(this,"countLabelSelection");_(this,"graphSelection");_(this,"positionSelection");_(this,"serverSelection");_(this,"hostSelection");this.initialize(),this.initializeChildGraphs(ie)}initializeForces(){this.nodes.forEach(a=>a.r=a.data.isServer?10:ft.radius(a));const n=Be().strength(a=>-300*a.children.filter(s=>s.type==="parentLinkNode").length),r=Oe(this.links),i=nr().strength(.1).radius(a=>ft.radius(a)+4),o=!0;this.simulationForces=[{name:"link",force:r,optional:o},{name:"charge",force:n,optional:o},{name:"x",force:Xe(0),optional:o},{name:"y",force:qe(0),optional:o},{name:"collide",force:i}],super.initializeForces()}initializeSelection(){this.rootGroupSelection=this.rootSelection.data([this.rootNode]).append("g").attr("id",mt).classed(C.superGraph,!0).attr("transform-origin","center"),this.graphSelection=this.rootGroupSelection.append("g"),this.linkSelection=this.graphSelection.selectAll("line").data(this.links).join("line").attr("id",mt).classed(C.parentLink,!0).classed(C.siblingLink,n=>n.type==="siblingLink"),this.positionSelection=this.graphSelection.selectAll("g").data(this.nodes).join("g").call(this.graphHandler.initializeDrag(this)),this.hostSelection=this.positionSelection.filter(n=>!n.data.isServer).append("g").append("circle").attr("r",n=>n.r||0).classed(C.computerNode,!0),this.serverSelection=this.positionSelection.filter(n=>n.data.isServer).append("g").append("polygon").attr("points",n=>vr(6,n.r||0)).classed(C.serverNode,!0),this.nodeSelection=this.positionSelection.selectChild().selectChild(),this.nodeSelection.attr("cy-test","graphNode").attr("id",mt).each(it).classed(C.parentLinkNode,n=>n.type==="parentLinkNode").classed(C.keyNode,n=>n.type==="keyNode").classed(C.superNode,!0).on("click",this.graphHandler.clickNode.bind(this.graphHandler)).on("mouseover",this.graphHandler.mouseOverNode.bind(this.graphHandler)),this.childGraphRootSelection=this.positionSelection.append("g").filter(n=>!n.data.isServer),this.labelSelection=this.rootGroupSelection.append("g").selectAll("text").data(this.nodes).join("text").attr("text-anchor","end").attr("cy-test","selectedLabel").attr("id",yr).each(it).classed(C.superNodeNameLabel,!0).classed(C.hiddenLabel,!0).text(Ln),this.countLabelSelection=this.rootGroupSelection.append("g").selectAll("text").data(this.nodes.filter(n=>n.leaves().filter(r=>r.type==="keyNode").length>1)).join("text").attr("text-anchor","middle").each(it).classed(C.superNodeCountLabel,!0).text(n=>n.leaves().filter(r=>r.type==="keyNode").length),super.initializeSelection()}drawUpdateNodeVisual(){var n;this.nodeSelection.each(it),(n=this.labelSelection)==null||n.each(it),this.countLabelSelection.each(it)}drawTime(){super.drawTime([this.countLabelSelection])}drawLayout(){var o;const{k:n,x:r,y:i}=this.graphHandler.zoomTransform;this.linkSelection.attr("x1",a=>G(a.source.x)*n+r).attr("y1",a=>G(a.source.y)*n+i).attr("x2",a=>G(a.target.x)*n+r).attr("y2",a=>G(a.target.y)*n+i),this.positionSelection.attr("transform",a=>Nt({d:a,zk:n,zx:r,zy:i})),(o=this.countLabelSelection)==null||o.attr("transform",a=>Nt({d:a,zk:n,zx:r,zy:i,ty:4})),this.drawDynamicLayout(),super.drawLayout()}drawDynamicLayout(){var a;const{k:n,x:r,y:i,rk:o}=this.graphHandler.zoomTransform;this.hostSelection.attr("r",s=>ft.shrinkRadius(s,o)),(a=this.labelSelection)==null||a.attr("transform",s=>{const c=(s.data.isServer?G(s.r):ft.shrinkRadius(s,o))*-1-4;return Nt({d:s,zk:n,zx:r,zy:i,ty:4,tx:c})})}drawInteraction(){var n,r;this.drawDynamicLayout(),(n=this.countLabelSelection)==null||n.classed(C.hiddenLabel,i=>Ft(i)),(r=this.labelSelection)==null||r.classed(C.hiddenLabel,i=>!mr(i)),super.drawInteraction(),this.graphSelection.selectChildren().sort(Ye)}drawUpdateLabel(){var n;(n=this.labelSelection)==null||n.text(Ln)}};_(ft,"radius",n=>{var o;const r=((o=n.children)==null?void 0:o.filter(a=>a.type==="keyNode"))||[];let i=0;for(let a=0;a<r.length;a++){const s=r[a];i+=pr(ie.radius(s)+10)}return gr(i)}),_(ft,"shrinkRadius",(n,r=1)=>{const i=G(n.r)*r;return Ft(n)?i:Math.max(i*.6,8)});let Te=ft;const Ln=t=>`${t.data.name||t.data.id} `;function Mc({selection:t,prioritySort:e,className:n="occluded"}){const r=[];t.selectAll("text").classed(n,!1).each((o,a,s)=>{const c=s[a],l=c.getBoundingClientRect();r.push({node:c,d:o,domRect:l})});const i=[];return e&&r.sort(e),r.forEach(o=>{const a=i.some(s=>zc(o.domRect,s.domRect));et(o.node).classed(n,a),a||i.push(o)}),i}function zc(t,e){return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)}const Cc=(t,e)=>{var r,i,o,a;const n=["previewedFocus","previewed","previewedParent","selectedFocus","selected","selectedParent"];for(const s of n)if(t.d[s]!=e.d[s])return t.d[s]?-1:1;return t.d.depth!==e.d.depth?t.d.depth-e.d.depth:((r=t.d.children)==null?void 0:r.length)!==((i=e.d.children)==null?void 0:i.length)?(((o=t.d.children)==null?void 0:o.length)||0)-(((a=e.d.children)==null?void 0:a.length)||0):0};function Tc(t=40){const e=document.createElement("style");e.id="dotGridStyle",document.head.appendChild(e);function n(r){const i=Math.pow(2,Math.floor(Math.log2(r.k))),o=r.k/i*t,a=r.x%o,s=r.y%o,c=.3,l=(o-t)/t,u=c*l,g=`hsla(${Mn}, ${c}) 1px, transparent 0`,h=`hsla(${Mn}, ${u}) 1px, transparent 0`,f=Ac.map(w=>`radial-gradient(circle at ${w}, ${h})`).concat(`radial-gradient(${g})`).join(`,
`),x=`${o}px ${o}px`,v=`calc(50% + ${a}px)`,d=`calc(50% + ${s}px)`,p=[["--dot-color-hsl","0, 0%, 50%"],["background-size",x],["background-position-x",v],["background-position-y",d],["background-image",f]].map(([w,b])=>`${w}: ${b};`).join(`
`);e.innerHTML=`.${wr}{
${p}
}`}return n}const wr="dotGrid",Mn="var(--dot-color-hsl)",Ac=["top left","top right","right","bottom right","bottom","bottom left","left"],se=class se{constructor({onSelectionChange:e=J,onPreviewChange:n=J,onTimeChange:r=J,onDataChange:i=J,graphData:o,element:a,previouslyParsedGraphData:s}){_(this,"graphData");_(this,"svg");_(this,"rootSelection");_(this,"dimensions",{width:0,height:0});_(this,"graphRoot");_(this,"onSelectionChange",J);_(this,"onPreviewChange",J);_(this,"onTimeChange",J);_(this,"onDataChange",J);_(this,"_onSelectionChange",(...e)=>{this.graphRoot.callChildrenRecursively("drawInteraction"),this.drawTextOcclusion(),this.onSelectionChange(...e)});_(this,"_onPreviewChange",(...e)=>{this.graphRoot.callChildrenRecursively("drawInteraction"),this.drawTextOcclusion(),this.onPreviewChange(...e)});_(this,"_onTimeChange",()=>{this.graphRoot.callChildrenRecursively("drawTime"),this.drawTextOcclusion(),this.onTimeChange()});_(this,"_onDataChange",()=>{this.updateGraphRoot(),this.onDataChange()});_(this,"zoom");_(this,"dragState",{});_(this,"forceMode","graph");this.onSelectionChange=e,this.onPreviewChange=n,this.onTimeChange=r,this.onDataChange=i,this.graphData=new pc({graphData:o,onSelectionChange:this._onSelectionChange,onPreviewChange:this._onPreviewChange,onTimeChange:this._onTimeChange,onDataChange:this._onDataChange,previouslyParsedGraphData:s}),this.svg=et(a).html("").classed([C.graphRoot,wr].join(" "),!0),this.resize(),this.svg.append("rect").on("mouseover",this.mouseOutNode.bind(this)).attr("width","100%").attr("height","100%").attr("x","-50%").attr("y","-50%").attr("fill","transparent"),this.rootSelection=this.svg.append("g"),this.initializeZoom(),this.updateGraphRoot(),uc(this),this.zoomToFit({duration:0})}updateGraphRoot(){this.graphRoot!=null&&this.rootSelection.selectChildren().remove(),this.graphRoot=new Te({rootNode:this.graphData.rootNode,rootSelection:this.rootSelection,graphHandler:this})}drawTextOcclusion(){Mc({selection:this.rootSelection,className:C.occludedLabel,prioritySort:Cc})}initializeZoom(){const e=Tc(),n=()=>{this.graphRoot.freeze(),this.graphRoot.callChildrenRecursively("drawLayout"),e(this.zoomTransform)},r=()=>{this.svg.classed(C.isZooming,!0)},i=()=>{this.svg.classed(C.isZooming,!1),this.drawTextOcclusion()};this.zoom=tc().extent([[0,0],[this.dimensions.width,this.dimensions.height]]).scaleExtent([1/2,10]).on("start",r).on("zoom",n).on("end",i),this.svg.call(this.zoom),e(this.zoomTransform)}get zoomTransform(){const e=or(this.svg.node());return e.rk=se.scaleRadius(e.k),e}zoomToFit({duration:e=750,boundingBox:n}={}){const{k:r,x:i,y:o}=this.zoomTransform,{height:a,width:s}=this.dimensions,c=n||this.rootSelection.node().getBBox(),{height:l,width:u}=c,g=c.x+u/2,h=c.y+l/2,f=Math.max(u/s,l/a),x=Math.min(r/f-.2,4),v=(i-g)/r,d=(o-h)/r;this.svg.transition().duration(e).call(this.zoom.transform,he.scale(x).translate(v,d))}zoomToSelection(){throw new Error("Not Implemented")}zoomIn(){this.svg.transition().call(this.zoom.scaleBy,1.3,[0,0])}zoomOut(){this.svg.transition().call(this.zoom.scaleBy,.7,[0,0])}initializeDrag(e){const n=o=>{o.active||(o.subject.fx=this.dragState.startX=o.subject.x,o.subject.fy=this.dragState.startY=o.subject.y)},r=o=>{this.dragState.isDragging||(this.dragState.isDragging=!0);const{k:a}=this.zoomTransform,{x:s,y:c}=o,{startX:l=0,startY:u=0}=this.dragState,g=s-l,h=c-u,f=g/a+l,x=h/a+u,{x:v,y:d}=ur([f,x],o.subject.parent.r-o.subject.r);o.subject.fx=v,o.subject.fy=d,e.reheat(Math.max(Math.abs(s),Math.abs(c))*1e-4)},i=o=>{o.active||(e.cool(),o.subject.fx=null,o.subject.fy=null,this.dragState={})};return uo().on("start",n).on("drag",r).on("end",i)}clickNode(e,n){n.selectedFocus?this.graphData.clearSelection():this.graphData.selectNodes([n])}mouseOverNode(e,n){this.dragState.isDragging||this.graphData.previewNode(n)}mouseOutNode(){this.dragState.isDragging||this.graphData.clearPreview()}resize(){const e=this.svg.node();this.dimensions={width:e.clientWidth,height:e.clientHeight};const{width:n,height:r}=this.dimensions;this.svg.attr("viewBox",[-n/2,-r/2,n,r].join(" "))}updateNodeName(e,n){const r=this.graphData.allNodes.get(e);r&&(r.data.name=n,this.graphRoot.callChildrenRecursively("drawUpdateLabel"))}updateNodeVisual({nodeId:e,className:n,shape:r}){const i=this.graphData.allNodes.get(e);i&&(n!=null&&(i.data.removeClassName=i.data.className,i.data.className=n),r&&(i.data.shape=r),this.graphRoot.callChildrenRecursively("drawUpdateNodeVisual"))}useForceMode(e){e==="simple"?(this.graphRoot.callChildrenRecursively("useSimpleForces"),this.forceMode="simple"):(this.graphRoot.callChildrenRecursively("useGraphForces"),this.forceMode="graph")}};_(se,"scaleRadius",e=>Math.min(e,(e-1)*.3+1));let Ae=se;const Ec=async()=>oc(50,5),Pc=async()=>{try{return await Ka("./private-test-data/parsedGraphData.json")}catch{return}},Dc=async t=>{const e=await Ec(),n=await Pc(),r=document.getElementById(t);window.graph=new Ae({graphData:e,element:r,previouslyParsedGraphData:n,onSelectionChange:i=>console.log(i)}),window.addEventListener("resize",()=>window.graph.resize()),console.log(window.graph)};Dc("app");
